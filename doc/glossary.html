<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.2">
    <meta name="project" content="macula v0.12.6">


    <title>Glossary — macula v0.12.6</title>

    <link rel="stylesheet" href="dist/html-erlang-DQDXQC7W.css" />

    <script defer src="dist/sidebar_items-969EFB48.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="overview.html" class="sidebar-projectImage">
          <img src="assets/logo.svg" alt="macula" />
        </a>

      <div>
        <a href="overview.html" class="sidebar-projectName" translate="no">
macula
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.12.6
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of macula</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>Macula Glossary</h1>


      <a href="https://github.com/macula-io/macula/blob/0.12.6/docs/GLOSSARY.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


<p><strong>Definitive terminology reference for Macula platform</strong></p><p><strong>Last Updated:</strong> 2025-11-28
<strong>Applies to:</strong> Macula v0.8.5+ (Always-On Architecture)</p><hr class="thin"/><h2 id="important-v0-8-5-architecture-change" class="section-heading"><a href="#important-v0-8-5-architecture-change" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Important: v0.8.5+ Architecture Change</span></h2><p>Since v0.8.5, Macula uses an <strong>always-on architecture</strong> where every node has all capabilities:</p><ul><li>Every node runs the <strong>Gateway System</strong> (QUIC message routing)</li><li>Every node runs the <strong>Bootstrap System</strong> (DHT and peer discovery)</li><li>Every node runs the <strong>Peer System</strong> (connection management)</li></ul><p><strong>There is no mode selection</strong> - all nodes are identical. The distinction between &quot;gateway node&quot; and &quot;peer node&quot; no longer exists.</p><hr class="thin"/><h2 id="quick-reference" class="section-heading"><a href="#quick-reference" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Quick Reference</span></h2><table><thead><tr><th style="text-align: left;">Term</th><th style="text-align: left;">One-Line Definition</th></tr></thead><tbody><tr><td style="text-align: left;"><a href="#node">Node</a></td><td style="text-align: left;">A Macula instance with all capabilities (v0.8.5+)</td></tr><tr><td style="text-align: left;"><a href="#seed-node">Seed Node</a></td><td style="text-align: left;">A well-known node address for initial mesh discovery</td></tr><tr><td style="text-align: left;"><a href="#peer">Peer</a></td><td style="text-align: left;">Any connected node in the mesh</td></tr><tr><td style="text-align: left;"><a href="#gateway-system">Gateway System</a></td><td style="text-align: left;">Subsystem for QUIC message routing (in every node)</td></tr><tr><td style="text-align: left;"><a href="#bootstrap-system">Bootstrap System</a></td><td style="text-align: left;">Subsystem for DHT operations (in every node)</td></tr><tr><td style="text-align: left;"><a href="#realm">Realm</a></td><td style="text-align: left;">Isolated namespace for multi-tenant applications</td></tr><tr><td style="text-align: left;"><a href="#dht">DHT</a></td><td style="text-align: left;">Distributed Hash Table for decentralized discovery</td></tr><tr><td style="text-align: left;"><a href="#topic">Topic</a></td><td style="text-align: left;">Named channel for pub/sub message routing</td></tr><tr><td style="text-align: left;"><a href="#procedure">Procedure</a></td><td style="text-align: left;">Named endpoint for RPC calls</td></tr></tbody></table><hr class="thin"/><h2 id="architecture-terms" class="section-heading"><a href="#architecture-terms" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Architecture Terms</span></h2><h3 id="realm" class="section-heading"><a href="#realm" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Realm</span></h3><p>A <strong>realm</strong> is an isolated namespace within Macula that provides multi-tenancy. Each realm has:</p><ul><li>Separate topic and procedure namespaces</li><li>Independent access control</li><li>Cryptographic isolation from other realms</li></ul><p><strong>Example:</strong> <code class="inline">&lt;&lt;&quot;com.mycompany.production&quot;&gt;&gt;</code> and <code class="inline">&lt;&lt;&quot;com.mycompany.staging&quot;&gt;&gt;</code> are separate realms that cannot see each other's messages.</p><p><strong>In code:</strong></p><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="7844183543-1">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="n">Client</span><span class="p" data-group-id="7844183543-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">macula</span><span class="p">:</span><span class="nf">connect_local</span><span class="p" data-group-id="7844183543-2">(</span><span class="p" data-group-id="7844183543-3">#{</span><span class="ss">realm</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="7844183543-4">&lt;&lt;</span><span class="s">&quot;my.app.realm&quot;</span><span class="p" data-group-id="7844183543-4">&gt;&gt;</span><span class="p" data-group-id="7844183543-3">}</span><span class="p" data-group-id="7844183543-2">)</span><span class="p">.</span></code></pre><p><strong>See also:</strong> <a href="pubsub_guide.html">Multi-tenancy in PUBSUB_GUIDE</a></p><hr class="thin"/><h3 id="peer" class="section-heading"><a href="#peer" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Peer</span></h3><p>A <strong>peer</strong> is any node participating in the Macula mesh network. Peers can:</p><ul><li>Publish and subscribe to topics</li><li>Advertise and call RPC procedures</li><li>Communicate directly with other peers (P2P)</li></ul><p>Internally implemented by <code class="inline">macula_peer.erl</code>.</p><p><strong>Related terms:</strong> <a href="#node">Node</a>, <a href="#client">Client</a>, <a href="#gateway">Gateway</a></p><hr class="thin"/><h3 id="node" class="section-heading"><a href="#node" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Node</span></h3><p>A <strong>node</strong> is a single Macula instance. Since v0.8.5, every node has ALL capabilities:</p><ul><li><strong>Gateway System</strong> - QUIC message routing</li><li><strong>Bootstrap System</strong> - DHT and peer discovery</li><li><strong>Peer System</strong> - Connection management</li><li><strong>Platform System</strong> - Distributed coordination</li></ul><pre><code class="makeup erlang" translate="no"><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
</span><span class="err">│</span><span class="w">               </span><span class="n">Macula</span><span class="w"> </span><span class="n">Node</span><span class="w">                </span><span class="err">│</span><span class="w">
</span><span class="err">├</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┤</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">  </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">   </span><span class="n">Gateway</span><span class="w">    </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">    </span><span class="n">Bootstrap</span><span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">   </span><span class="n">System</span><span class="w">     </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">     </span><span class="n">System</span><span class="w">      </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">  </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">           </span><span class="n">Peer</span><span class="w"> </span><span class="n">System</span><span class="w">                </span><span class="err">│</span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="err">│</span><span class="w">
</span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span></code></pre><p><strong>Node ID:</strong> A 32-byte (256-bit) identifier used for DHT routing, generated from the node's TLS certificate fingerprint.</p><p><strong>Note:</strong> In some contexts, &quot;node&quot; may also refer to an Erlang/BEAM node (<code class="inline">node@host</code>). The meaning is usually clear from context.</p><hr class="thin"/><h3 id="seed-node" class="section-heading"><a href="#seed-node" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Seed Node</span></h3><p>A <strong>seed node</strong> (also called &quot;bootstrap address&quot;) is a <strong>well-known node address</strong> that new nodes use for initial mesh discovery.</p><p><strong>Key points:</strong></p><ul><li>Seed nodes are <strong>regular nodes</strong> with no special code</li><li>They are simply &quot;the first nodes to start&quot; whose addresses are shared</li><li>Any node can be a seed node - it's a deployment choice, not a code difference</li><li>Multiple seed nodes recommended for redundancy</li></ul><p><strong>Configuration:</strong></p><pre><code class="makeup erlang" translate="no"><span class="c1">%% New node connects to seed node(s) for initial discovery</span><span class="w">
</span><span class="p" data-group-id="3716956310-1">{</span><span class="ss">bootstrap_addresses</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3716956310-2">[</span><span class="s">&quot;quic://seed1.example.com:4433&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;quic://seed2.example.com:4433&quot;</span><span class="p" data-group-id="3716956310-2">]</span><span class="p" data-group-id="3716956310-1">}</span></code></pre><p><strong>Environment variable:</strong> <code class="inline">MACULA_BOOTSTRAP_PEERS</code></p><p><strong>Note:</strong> This was previously called &quot;bootstrap node&quot; in some documentation. &quot;Seed node&quot; is preferred to avoid confusion with the Bootstrap System.</p><hr class="thin"/><h3 id="client" class="section-heading"><a href="#client" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Client</span></h3><p>A <strong>client</strong> is a handle (PID) returned when connecting to Macula. It represents an active connection that can perform mesh operations.</p><p><strong>In code:</strong></p><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="0539112306-1">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="n">Client</span><span class="p" data-group-id="0539112306-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">macula</span><span class="p">:</span><span class="nf">connect_local</span><span class="p" data-group-id="0539112306-2">(</span><span class="p" data-group-id="0539112306-3">#{</span><span class="ss">realm</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="0539112306-4">&lt;&lt;</span><span class="s">&quot;my.realm&quot;</span><span class="p" data-group-id="0539112306-4">&gt;&gt;</span><span class="p" data-group-id="0539112306-3">}</span><span class="p" data-group-id="0539112306-2">)</span><span class="p">.</span><span class="w">
</span><span class="c1">%% Client is now a pid() that can be used for publish/subscribe/call</span></code></pre><p><strong>Note:</strong> The public API uses the type <code class="inline">macula:client()</code> which is an alias for <code class="inline">pid()</code>.</p><hr class="thin"/><h3 id="gateway-system" class="section-heading"><a href="#gateway-system" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Gateway System</span></h3><p>The <strong>Gateway System</strong> is a subsystem present in <strong>every node</strong> that handles QUIC message routing.</p><p><strong>Responsibilities:</strong></p><ul><li>QUIC listener management (<code class="inline">macula_gateway_quic_server</code>)</li><li>Client connection handling (<code class="inline">macula_gateway_clients</code>)</li><li>PubSub message routing (<code class="inline">macula_gateway_pubsub</code>, <code class="inline">macula_gateway_pubsub_router</code>)</li><li>RPC request routing (<code class="inline">macula_gateway_rpc</code>, <code class="inline">macula_gateway_rpc_router</code>)</li><li>Mesh connection pooling (<code class="inline">macula_gateway_mesh</code>)</li><li>DHT query forwarding (<code class="inline">macula_gateway_dht</code>)</li><li>Health monitoring (<code class="inline">macula_gateway_health</code>)</li></ul><p><strong>Main module:</strong> <code class="inline">macula_gateway.erl</code> - API facade and orchestrator</p><p><strong>Code location:</strong> <code class="inline">src/macula_gateway_system/</code></p><hr class="thin"/><h3 id="bootstrap-system" class="section-heading"><a href="#bootstrap-system" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Bootstrap System</span></h3><p>The <strong>Bootstrap System</strong> is a subsystem present in <strong>every node</strong> that handles DHT operations and peer discovery.</p><p><strong>Responsibilities:</strong></p><ul><li>DHT queries: FIND_NODE, FIND_VALUE, STORE (<code class="inline">macula_bootstrap_server</code>)</li><li>Peer registration and discovery (<code class="inline">macula_bootstrap_registry</code>)</li><li>Health monitoring (<code class="inline">macula_bootstrap_health</code>)</li></ul><p><strong>Code location:</strong> <code class="inline">src/macula_bootstrap_system/</code></p><p><strong>Note:</strong> &quot;Bootstrap System&quot; refers to the subsystem. For the well-known entry point, see <a href="#seed-node">Seed Node</a>.</p><hr class="thin"/><h3 id="mesh" class="section-heading"><a href="#mesh" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Mesh</span></h3><p>The <strong>mesh</strong> is the network topology formed by interconnected Macula peers. Unlike hub-and-spoke architectures, the mesh allows:</p><ul><li>Direct peer-to-peer communication</li><li>Multiple paths between nodes</li><li>No single point of failure</li></ul><pre><code class="makeup erlang" translate="no"><span class="w">    </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">     </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
    </span><span class="err">│</span><span class="n">Peer1</span><span class="err">│</span><span class="err">◄</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="n">Peer2</span><span class="err">│</span><span class="w">
    </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">┬</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">     </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">┬</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">
       </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w">
       </span><span class="err">▼</span><span class="w">           </span><span class="err">▼</span><span class="w">
    </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">     </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
    </span><span class="err">│</span><span class="n">Peer3</span><span class="err">│</span><span class="err">◄</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="n">Peer4</span><span class="err">│</span><span class="w">
    </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">     </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span></code></pre><hr class="thin"/><h2 id="networking-terms" class="section-heading"><a href="#networking-terms" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Networking Terms</span></h2><h3 id="quic" class="section-heading"><a href="#quic" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">QUIC</span></h3><p><strong>QUIC</strong> (Quick UDP Internet Connections) is the transport protocol underlying HTTP/3. Macula uses QUIC because it provides:</p><ul><li><strong>Multiplexed streams</strong> - Multiple logical channels over one connection</li><li><strong>Built-in TLS 1.3</strong> - Mandatory encryption</li><li><strong>Connection migration</strong> - Survives IP address changes</li><li><strong>NAT-friendly</strong> - Works over UDP through firewalls</li></ul><p><strong>Implementation:</strong> Macula uses <a href="https://github.com/qzhuyan/quicer">quicer</a>, which wraps Microsoft's MsQuic library.</p><hr class="thin"/><h3 id="http-3" class="section-heading"><a href="#http-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">HTTP/3</span></h3><p><strong>HTTP/3</strong> is the latest version of HTTP, built on QUIC instead of TCP. Macula uses HTTP/3 semantics for:</p><ul><li>Request/response patterns (RPC)</li><li>Streaming (pub/sub delivery)</li><li>Multiplexing (multiple topics on one connection)</li></ul><p><strong>Note:</strong> Macula uses HTTP/3 framing but with custom semantics optimized for mesh networking.</p><hr class="thin"/><h3 id="nat-traversal" class="section-heading"><a href="#nat-traversal" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">NAT Traversal</span></h3><p><strong>NAT traversal</strong> refers to techniques for establishing connections between peers behind Network Address Translation (NAT) devices (home routers, corporate firewalls).</p><p>Macula's approach:</p><ul><li><strong>QUIC/UDP</strong> - Better NAT compatibility than TCP</li><li><strong>Gateway relay</strong> - Fallback when direct P2P fails</li><li><strong>Future:</strong> STUN/TURN/ICE for hole punching</li></ul><p><strong>See also:</strong> NAT Traversal documentation in the guides section.</p><hr class="thin"/><h3 id="dht" class="section-heading"><a href="#dht" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">DHT</span></h3><p>A <strong>Distributed Hash Table</strong> is a decentralized system that provides key-value lookup across a network of peers. Macula uses a Kademlia-style DHT for:</p><ul><li><strong>Service discovery</strong> - Finding which peer provides a procedure</li><li><strong>Subscriber lookup</strong> - Finding who subscribes to a topic</li><li><strong>Peer routing</strong> - Finding paths to other nodes</li></ul><p><strong>Key concepts:</strong></p><ul><li><strong>k-buckets</strong> - Routing table organized by XOR distance</li><li><strong>Node ID</strong> - 256-bit identifier for each peer</li><li><strong>Replication factor (k)</strong> - Number of nodes storing each value (default: 20)</li></ul><hr class="thin"/><h3 id="mdns" class="section-heading"><a href="#mdns" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">mDNS</span></h3><p><strong>Multicast DNS</strong> (mDNS) is a protocol for discovering services on local networks without a central DNS server. Macula uses mDNS for:</p><ul><li>Local peer discovery (same LAN)</li><li>Zero-configuration networking</li><li>Development/testing environments</li></ul><p><strong>Implementation:</strong> Uses <a href="https://github.com/shortishly/mdns">shortishly/mdns</a> library.</p><hr class="thin"/><h2 id="messaging-terms" class="section-heading"><a href="#messaging-terms" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Messaging Terms</span></h2><h3 id="topic" class="section-heading"><a href="#topic" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Topic</span></h3><p>A <strong>topic</strong> is a named channel for pub/sub messaging. Publishers send messages to topics; subscribers receive messages from topics they've subscribed to.</p><p><strong>Topic design principles:</strong></p><ul><li>Topics describe <strong>event types</strong>, not entity IDs</li><li>Good: <code class="inline">&lt;&lt;&quot;sensor.temperature.measured&quot;&gt;&gt;</code></li><li>Bad: <code class="inline">&lt;&lt;&quot;sensor.device123.temperature&quot;&gt;&gt;</code> (ID in topic)</li></ul><p><strong>Wildcards:</strong></p><ul><li><code class="inline">*</code> - Matches one segment: <code class="inline">&lt;&lt;&quot;sensor.*.measured&quot;&gt;&gt;</code></li><li><code class="inline">#</code> - Matches zero or more segments: <code class="inline">&lt;&lt;&quot;sensor.#&quot;&gt;&gt;</code></li></ul><p><strong>See also:</strong> <a href="pubsub_guide.html">PubSub Guide</a></p><hr class="thin"/><h3 id="procedure" class="section-heading"><a href="#procedure" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Procedure</span></h3><p>A <strong>procedure</strong> is a named endpoint for RPC (Remote Procedure Call) operations. Providers advertise procedures; callers invoke them.</p><p><strong>Example:</strong></p><pre><code class="makeup erlang" translate="no"><span class="c1">%% Provider advertises</span><span class="w">
</span><span class="nc">macula</span><span class="p">:</span><span class="nf">advertise</span><span class="p" data-group-id="2643035711-1">(</span><span class="n">Client</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2643035711-2">&lt;&lt;</span><span class="s">&quot;math.add&quot;</span><span class="p" data-group-id="2643035711-2">&gt;&gt;</span><span class="p">,</span><span class="w"> </span><span class="nf">fun</span><span class="p" data-group-id="2643035711-3">(</span><span class="p" data-group-id="2643035711-4">#{</span><span class="ss">a</span><span class="w"> </span><span class="p">:=</span><span class="w"> </span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="ss">b</span><span class="w"> </span><span class="p">:=</span><span class="w"> </span><span class="n">B</span><span class="p" data-group-id="2643035711-4">}</span><span class="p" data-group-id="2643035711-3">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="2643035711-5">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2643035711-6">#{</span><span class="ss">result</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">B</span><span class="p" data-group-id="2643035711-6">}</span><span class="p" data-group-id="2643035711-5">}</span><span class="w">
</span><span class="k">end</span><span class="p" data-group-id="2643035711-1">)</span><span class="p">.</span><span class="w">

</span><span class="c1">%% Caller invokes</span><span class="w">
</span><span class="p" data-group-id="2643035711-7">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2643035711-8">#{</span><span class="ss">result</span><span class="w"> </span><span class="p">:=</span><span class="w"> </span><span class="mi">8</span><span class="p" data-group-id="2643035711-8">}</span><span class="p" data-group-id="2643035711-7">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">macula</span><span class="p">:</span><span class="nf">call</span><span class="p" data-group-id="2643035711-9">(</span><span class="n">Client</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2643035711-10">&lt;&lt;</span><span class="s">&quot;math.add&quot;</span><span class="p" data-group-id="2643035711-10">&gt;&gt;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2643035711-11">#{</span><span class="ss">a</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="ss">b</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="2643035711-11">}</span><span class="p" data-group-id="2643035711-9">)</span><span class="p">.</span></code></pre><p><strong>See also:</strong> <a href="rpc_guide.html">RPC Guide</a></p><hr class="thin"/><h3 id="pub-sub" class="section-heading"><a href="#pub-sub" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Pub/Sub</span></h3><p><strong>Publish/Subscribe</strong> is a messaging pattern where:</p><ul><li><strong>Publishers</strong> send messages to topics without knowing who receives them</li><li><strong>Subscribers</strong> receive messages from topics without knowing who sent them</li></ul><p>This decouples senders from receivers, enabling scalable event-driven architectures.</p><hr class="thin"/><h3 id="rpc" class="section-heading"><a href="#rpc" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">RPC</span></h3><p><strong>Remote Procedure Call</strong> is a request/response pattern where:</p><ul><li><strong>Caller</strong> sends a request with arguments</li><li><strong>Provider</strong> executes a handler and returns a result</li></ul><p>Unlike pub/sub, RPC is synchronous (caller waits for response).</p><hr class="thin"/><h3 id="subscription" class="section-heading"><a href="#subscription" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Subscription</span></h3><p>A <strong>subscription</strong> is an active registration to receive messages from a topic. Represented by a reference that can be used to unsubscribe.</p><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="1486712958-1">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="n">SubRef</span><span class="p" data-group-id="1486712958-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">macula</span><span class="p">:</span><span class="nf">subscribe</span><span class="p" data-group-id="1486712958-2">(</span><span class="n">Client</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1486712958-3">&lt;&lt;</span><span class="s">&quot;events.#&quot;</span><span class="p" data-group-id="1486712958-3">&gt;&gt;</span><span class="p">,</span><span class="w"> </span><span class="nf">fun</span><span class="p" data-group-id="1486712958-4">(</span><span class="n">Event</span><span class="p" data-group-id="1486712958-4">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">handle_event</span><span class="p" data-group-id="1486712958-5">(</span><span class="n">Event</span><span class="p" data-group-id="1486712958-5">)</span><span class="w">
</span><span class="k">end</span><span class="p" data-group-id="1486712958-2">)</span><span class="p">.</span><span class="w">

</span><span class="c1">%% Later</span><span class="w">
</span><span class="ss">ok</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">macula</span><span class="p">:</span><span class="nf">unsubscribe</span><span class="p" data-group-id="1486712958-6">(</span><span class="n">Client</span><span class="p">,</span><span class="w"> </span><span class="n">SubRef</span><span class="p" data-group-id="1486712958-6">)</span><span class="p">.</span></code></pre><hr class="thin"/><h3 id="advertisement" class="section-heading"><a href="#advertisement" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Advertisement</span></h3><p>An <strong>advertisement</strong> is a registration that makes a procedure available for RPC calls. Advertisements are:</p><ul><li>Stored in the local service registry</li><li>Propagated to the DHT for discovery</li><li>Refreshed periodically (TTL-based)</li></ul><hr class="thin"/><h2 id="platform-layer-terms" class="section-heading"><a href="#platform-layer-terms" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Platform Layer Terms</span></h2><h3 id="platform-layer" class="section-heading"><a href="#platform-layer" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Platform Layer</span></h3><p>The <strong>Platform Layer</strong> (v0.9.0+) provides distributed coordination primitives for workload applications:</p><ul><li>Leader election via Raft consensus</li><li>Shared state via CRDTs</li><li>Workload registration</li></ul><p><strong>See also:</strong> Platform Vision in the architecture documentation.</p><hr class="thin"/><h3 id="leader-election" class="section-heading"><a href="#leader-election" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Leader Election</span></h3><p><strong>Leader election</strong> is the process of selecting a single coordinator node from a group. Macula uses Ra (Raft) for:</p><ul><li>Consensus on who is leader</li><li>Automatic failover if leader crashes</li><li>Term numbers for consistency</li></ul><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="4270945576-1">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="n">LeaderNodeId</span><span class="p" data-group-id="4270945576-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">macula</span><span class="p">:</span><span class="nf">get_leader</span><span class="p" data-group-id="4270945576-2">(</span><span class="n">Client</span><span class="p" data-group-id="4270945576-2">)</span><span class="p">.</span></code></pre><hr class="thin"/><h3 id="crdt" class="section-heading"><a href="#crdt" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">CRDT</span></h3><p>A <strong>Conflict-free Replicated Data Type</strong> is a data structure that can be updated concurrently on multiple nodes and automatically converges to a consistent state.</p><p>Macula supports:</p><ul><li><strong>LWW-Register</strong> - Last-Write-Wins register</li><li><strong>G-Counter</strong> - Grow-only counter</li><li><strong>PN-Counter</strong> - Increment/decrement counter</li><li><strong>G-Set</strong> - Grow-only set</li><li><strong>OR-Set</strong> - Observed-Remove set</li></ul><pre><code class="makeup erlang" translate="no"><span class="ss">ok</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">macula</span><span class="p">:</span><span class="nf">propose_crdt_update</span><span class="p" data-group-id="8036716040-1">(</span><span class="n">Client</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8036716040-2">&lt;&lt;</span><span class="s">&quot;counter&quot;</span><span class="p" data-group-id="8036716040-2">&gt;&gt;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8036716040-3">{</span><span class="ss">increment</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="8036716040-3">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="8036716040-4">#{</span><span class="ss">crdt_type</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">pn_counter</span><span class="p" data-group-id="8036716040-4">}</span><span class="p" data-group-id="8036716040-1">)</span><span class="p">.</span></code></pre><hr class="thin"/><h2 id="beam-terms" class="section-heading"><a href="#beam-terms" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">BEAM Terms</span></h2><h3 id="beam" class="section-heading"><a href="#beam" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">BEAM</span></h3><p>The <strong>BEAM</strong> is the virtual machine that runs Erlang and Elixir code. BEAM provides:</p><ul><li>Lightweight processes (millions per node)</li><li>Preemptive scheduling</li><li>Hot code upgrades</li><li>Built-in distribution</li></ul><p>Macula is built entirely on BEAM technologies.</p><hr class="thin"/><h3 id="otp" class="section-heading"><a href="#otp" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">OTP</span></h3><p><strong>Open Telecom Platform</strong> is the standard library and design patterns for Erlang/Elixir applications. Key concepts:</p><ul><li><strong>Supervision trees</strong> - Hierarchical process monitoring</li><li><strong>Behaviours</strong> - Reusable patterns (gen_server, gen_statem)</li><li><strong>Applications</strong> - Packaged, startable components</li></ul><hr class="thin"/><h3 id="supervision-tree" class="section-heading"><a href="#supervision-tree" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Supervision Tree</span></h3><p>A <strong>supervision tree</strong> is a hierarchical structure of processes where supervisors monitor workers and restart them on failure.</p><pre><code class="makeup erlang" translate="no"><span class="w">        </span><span class="ss">macula_sup</span><span class="w">
            </span><span class="err">│</span><span class="w">
    </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
    </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">
</span><span class="ss">gateway_sup</span><span class="w"> </span><span class="ss">dht_sup</span><span class="w"> </span><span class="ss">platform_sup</span><span class="w">
    </span><span class="err">│</span><span class="w">
</span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┴</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
</span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">
</span><span class="ss">client</span><span class="w">  </span><span class="ss">pubsub</span><span class="w">
</span><span class="ss">manager</span><span class="w"> </span><span class="ss">handler</span></code></pre><p><strong>Strategy:</strong> <code class="inline">one_for_one</code> (restart failed child only) or <code class="inline">one_for_all</code> (restart all children).</p><hr class="thin"/><h3 id="gen_server" class="section-heading"><a href="#gen_server" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">gen_server</span></h3><p>A <strong>gen_server</strong> is an OTP behaviour for implementing client-server processes. Most Macula modules are gen_servers:</p><ul><li><code class="inline">macula_gateway</code> - Main gateway process</li><li><code class="inline">macula_peer</code> - Client connection handler</li><li><code class="inline">macula_rpc_handler</code> - RPC call management</li></ul><hr class="thin"/><h3 id="process" class="section-heading"><a href="#process" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Process</span></h3><p>In BEAM, a <strong>process</strong> is a lightweight, isolated unit of execution. Processes:</p><ul><li>Share nothing (no shared memory)</li><li>Communicate via message passing</li><li>Can number in millions per node</li><li>Crash independently (fault isolation)</li></ul><hr class="thin"/><h2 id="event-sourcing-terms" class="section-heading"><a href="#event-sourcing-terms" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Event Sourcing Terms</span></h2><h3 id="event-sourcing" class="section-heading"><a href="#event-sourcing" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Event Sourcing</span></h3><p><strong>Event sourcing</strong> is a pattern where state changes are captured as immutable events. Instead of storing current state, you store the sequence of events that led to it.</p><p><strong>Benefits:</strong></p><ul><li>Complete audit trail</li><li>Replay capability</li><li>Temporal queries</li></ul><p><strong>See also:</strong> ReckonDB integration (see ecosystem documentation)</p><hr class="thin"/><h3 id="event" class="section-heading"><a href="#event" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Event</span></h3><p>An <strong>event</strong> is an immutable record of something that happened. Events should:</p><ul><li>Be named in past tense: <code class="inline">user_registered</code>, <code class="inline">order_placed</code></li><li>Capture business intent, not CRUD operations</li><li>Include all relevant data in the payload</li></ul><p><strong>Anti-pattern:</strong> <code class="inline">user_updated</code> (CRUD) vs <code class="inline">user_email_changed</code> (intent)</p><hr class="thin"/><h3 id="projection" class="section-heading"><a href="#projection" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Projection</span></h3><p>A <strong>projection</strong> is a read model built by processing events. Projections:</p><ul><li>Transform events into queryable state</li><li>Can be rebuilt from event history</li><li>Optimized for specific read patterns</li></ul><hr class="thin"/><h2 id="security-terms" class="section-heading"><a href="#security-terms" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Security Terms</span></h2><h3 id="tls-1-3" class="section-heading"><a href="#tls-1-3" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">TLS 1.3</span></h3><p><strong>Transport Layer Security 1.3</strong> is the cryptographic protocol securing Macula connections. In QUIC/HTTP3, TLS 1.3 is mandatory (not optional).</p><p><strong>Benefits:</strong></p><ul><li>Faster handshake (1-RTT)</li><li>Forward secrecy</li><li>Simplified cipher suites</li></ul><hr class="thin"/><h3 id="realm-isolation" class="section-heading"><a href="#realm-isolation" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Realm Isolation</span></h3><p><strong>Realm isolation</strong> ensures that peers in different realms cannot:</p><ul><li>See each other's topics</li><li>Call each other's procedures</li><li>Access each other's DHT entries</li></ul><p>Isolation is enforced cryptographically, not just by naming conventions.</p><hr class="thin"/><h2 id="configuration-terms" class="section-heading"><a href="#configuration-terms" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Configuration Terms</span></h2><h3 id="sys-config" class="section-heading"><a href="#sys-config" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">sys.config</span></h3><p>The <strong>sys.config</strong> file is the standard Erlang configuration file for OTP applications. Macula settings are configured here:</p><pre><code class="makeup erlang" translate="no"><span class="p" data-group-id="8633174965-1">[</span><span class="w">
  </span><span class="p" data-group-id="8633174965-2">{</span><span class="ss">macula</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8633174965-3">[</span><span class="w">
    </span><span class="p" data-group-id="8633174965-4">{</span><span class="ss">quic_port</span><span class="p">,</span><span class="w"> </span><span class="mi">4433</span><span class="p" data-group-id="8633174965-4">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="8633174965-5">{</span><span class="ss">max_clients</span><span class="p">,</span><span class="w"> </span><span class="mi">10000</span><span class="p" data-group-id="8633174965-5">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="8633174965-6">{</span><span class="ss">rpc_timeout_ms</span><span class="p">,</span><span class="w"> </span><span class="mi">5000</span><span class="p" data-group-id="8633174965-6">}</span><span class="w">
  </span><span class="p" data-group-id="8633174965-3">]</span><span class="p" data-group-id="8633174965-2">}</span><span class="w">
</span><span class="p" data-group-id="8633174965-1">]</span><span class="p">.</span></code></pre><hr class="thin"/><h3 id="environment-variables" class="section-heading"><a href="#environment-variables" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Environment Variables</span></h3><p>Key environment variables for Macula:</p><table><thead><tr><th style="text-align: left;">Variable</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr><td style="text-align: left;"><code class="inline">MACULA_BOOTSTRAP_PEERS</code></td><td style="text-align: left;">Comma-separated list of bootstrap node URLs</td></tr><tr><td style="text-align: left;"><code class="inline">MACULA_REALM</code></td><td style="text-align: left;">Default realm for connections</td></tr><tr><td style="text-align: left;"><code class="inline">MACULA_QUIC_PORT</code></td><td style="text-align: left;">QUIC listener port (default: 4433)</td></tr><tr><td style="text-align: left;"><code class="inline">MACULA_NODE_ID</code></td><td style="text-align: left;">Fixed node ID (otherwise auto-generated)</td></tr></tbody></table><hr class="thin"/><h2 id="deprecated-terminology" class="section-heading"><a href="#deprecated-terminology" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Deprecated Terminology</span></h2><p>The following terms are <strong>outdated</strong> (pre-v0.8.5) and should not be used in new documentation:</p><table><thead><tr><th style="text-align: left;">Deprecated Term</th><th style="text-align: left;">Current Term</th><th style="text-align: left;">Notes</th></tr></thead><tbody><tr><td style="text-align: left;">&quot;Gateway mode&quot;</td><td style="text-align: left;">N/A</td><td style="text-align: left;">All nodes have Gateway System (v0.8.5+)</td></tr><tr><td style="text-align: left;">&quot;Edge peer mode&quot;</td><td style="text-align: left;">N/A</td><td style="text-align: left;">All nodes are identical (v0.8.5+)</td></tr><tr><td style="text-align: left;">&quot;Start gateway&quot;</td><td style="text-align: left;">N/A</td><td style="text-align: left;">Gateway System always starts</td></tr><tr><td style="text-align: left;">&quot;Bootstrap mode&quot;</td><td style="text-align: left;">N/A</td><td style="text-align: left;">All nodes have Bootstrap System</td></tr><tr><td style="text-align: left;">&quot;The gateway&quot; (as a special node)</td><td style="text-align: left;">Seed Node</td><td style="text-align: left;">If referring to the initial entry point</td></tr><tr><td style="text-align: left;">&quot;Bootstrap node&quot; (as special node)</td><td style="text-align: left;">Seed Node</td><td style="text-align: left;">Seed node is preferred to avoid confusion</td></tr><tr><td style="text-align: left;"><code class="inline">MACULA_START_GATEWAY</code></td><td style="text-align: left;">N/A</td><td style="text-align: left;">Environment variable no longer needed</td></tr></tbody></table><h3 id="historical-context" class="section-heading"><a href="#historical-context" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Historical Context</span></h3><p>Before v0.8.5, Macula had two deployment modes:</p><ul><li><strong>Gateway mode</strong>: Central connection point with QUIC listener</li><li><strong>Edge peer mode</strong>: Lightweight clients connecting via gateway</li></ul><p>This was removed in v0.8.5 in favor of the <strong>always-on architecture</strong> where all nodes are equal participants in the mesh. Every node now runs all subsystems.</p><p><strong>Migration from pre-v0.8.5:</strong></p><ul><li>Remove <code class="inline">MACULA_START_GATEWAY</code> environment variable</li><li>All nodes now have identical configuration</li><li>Use <code class="inline">MACULA_BOOTSTRAP_PEERS</code> to specify seed nodes for initial discovery</li></ul><hr class="thin"/><h2 id="see-also" class="section-heading"><a href="#see-also" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">See Also</span></h2><ul><li><a href="overview.html">Platform Overview</a> - High-level introduction</li><li><a href="quick_start.html">Quick Start</a> - Getting started guide</li><li><a href="rpc_guide.html">RPC Guide</a> - RPC patterns and usage</li><li><a href="pubsub_guide.html">PubSub Guide</a> - Pub/Sub patterns and usage</li><li><a href="../architecture/v0.8.0-OVERVIEW.md">Architecture Overview</a> - Technical architecture</li></ul>

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="comparison.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Technology Comparison
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="readme-2.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Comparisons
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/macula/0.12.6" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/macula/0.12.6">Hex Preview</a>

              (<a href="https://preview.hex.pm/preview/macula/0.12.6/show/docs/GLOSSARY.md">current file</a>)

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="macula.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.2) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
