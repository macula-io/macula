<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.2">
    <meta name="project" content="macula v0.10.0">


    <title>Architecture Guide — macula v0.10.0</title>

    <link rel="stylesheet" href="dist/html-erlang-DQDXQC7W.css" />

    <script defer src="dist/sidebar_items-074F6B0F.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="readme.html" class="sidebar-projectImage">
          <img src="assets/logo.svg" alt="macula" />
        </a>

      <div>
        <a href="readme.html" class="sidebar-projectName" translate="no">
macula
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.10.0
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of macula</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>Macula Architecture Overview</h1>


      <a href="https://github.com/macula-io/macula/blob/0.10.0/ARCHITECTURE.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


<blockquote><p><strong>Visual guide to understanding Macula's distributed mesh architecture</strong></p></blockquote><hr class="thin"/><h2 id="table-of-contents" class="section-heading"><a href="#table-of-contents" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Table of Contents</span></h2><ol><li><a href="#system-context-c4">System Context (C4)</a></li><li><a href="#container-view-c4">Container View (C4)</a></li><li><a href="#deployment-topologies">Deployment Topologies</a></li><li><a href="#supervision-trees">Supervision Trees</a></li><li><a href="#message-flow-patterns">Message Flow Patterns</a></li><li><a href="#dht-architecture">DHT Architecture</a></li><li><a href="#direct-p2p-connections-v080">Direct P2P Connections (v0.8.0)</a></li></ol><hr class="thin"/><h2 id="system-context-c4" class="section-heading"><a href="#system-context-c4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">System Context (C4)</span></h2><p><strong>How applications use Macula to build distributed systems</strong></p><pre><code class="mermaid">graph TB
    subgraph &quot;Your Application&quot;
        App[Elixir/Erlang Application]
    end

    subgraph &quot;Macula Platform&quot;
        Peer[macula_peer&lt;br/&gt;Mesh Participant API]
        Gateway[macula_gateway&lt;br/&gt;Relay Node]
        DHT[Distributed Hash Table&lt;br/&gt;Service Discovery]
    end

    subgraph &quot;Other Nodes&quot;
        Remote1[Remote Service 1]
        Remote2[Remote Service 2]
        Remote3[Remote Subscriber]
    end

    App --&gt;|start_link&lt;br/&gt;publish&lt;br/&gt;subscribe&lt;br/&gt;call&lt;br/&gt;advertise| Peer
    Peer --&gt;|QUIC/HTTP3| Gateway
    Peer -.-&gt;|Direct P2P| Remote1
    Peer -.-&gt;|Direct P2P| Remote2
    Gateway --&gt;|Relay| Remote3

    Peer &lt;--&gt;|Query| DHT
    Gateway &lt;--&gt;|Store/Find| DHT

    style Peer fill:#4CAF50
    style Gateway fill:#2196F3
    style DHT fill:#FF9800
    style App fill:#9C27B0</code></pre><p><strong>Key Concepts:</strong></p><ul><li><strong>macula_peer</strong>: Your application's interface to the mesh</li><li><strong>macula_gateway</strong>: Relay node for NAT-traversed peers (optional)</li><li><strong>DHT</strong>: Kademlia-based distributed service registry (k=20 replication)</li><li><strong>Direct P2P</strong>: v0.8.0+ establishes direct QUIC connections (50% latency improvement)</li></ul><hr class="thin"/><h2 id="container-view-c4" class="section-heading"><a href="#container-view-c4" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Container View (C4)</span></h2><p><strong>Internal architecture of a Macula node</strong></p><pre><code class="mermaid">graph TB
    subgraph &quot;Application Layer&quot;
        App[Your Application Code]
    end

    subgraph &quot;Macula Peer (High-Level API)&quot;
        Peer[macula_peer&lt;br/&gt;Facade/Coordinator]

        subgraph &quot;Supervised Children&quot;
            Conn[macula_connection&lt;br/&gt;QUIC Transport]
            PSH[macula_pubsub_handler&lt;br/&gt;Pub/Sub Logic]
            RPC[macula_rpc_handler&lt;br/&gt;RPC Logic]
            ADV[macula_advertisement_manager&lt;br/&gt;DHT Ads]
        end
    end

    subgraph &quot;Gateway (Optional Relay)&quot;
        GW[macula_gateway&lt;br/&gt;Coordinator]

        subgraph &quot;Gateway Workers&quot;
            Clients[macula_gateway_client_manager&lt;br/&gt;Client Lifecycle]
            GWPS[macula_gateway_pubsub&lt;br/&gt;Message Routing]
            GWRPC[macula_gateway_rpc&lt;br/&gt;Handler Registry]
            Mesh[macula_gateway_mesh&lt;br/&gt;Connection Pool]
        end
    end

    subgraph &quot;Core Services&quot;
        Routing[macula_routing_server&lt;br/&gt;DHT Node]
        Service[macula_service_registry&lt;br/&gt;Service Store]
        PubSubDHT[macula_pubsub_dht&lt;br/&gt;Subscriber Discovery]
    end

    App --&gt;|API Calls| Peer
    Peer --&gt; Conn
    Peer --&gt; PSH
    Peer --&gt; RPC
    Peer --&gt; ADV

    Conn -.-&gt;|QUIC| GW
    GW --&gt; Clients
    GW --&gt; GWPS
    GW --&gt; GWRPC
    GW --&gt; Mesh

    PSH --&gt; PubSubDHT
    RPC --&gt; Service
    ADV --&gt; Service
    Service --&gt; Routing
    PubSubDHT --&gt; Routing

    style Peer fill:#4CAF50
    style GW fill:#2196F3
    style Routing fill:#FF9800</code></pre><p><strong>Architecture Principles:</strong></p><ul><li><strong>Single Responsibility</strong>: Each module has one clear purpose</li><li><strong>OTP Supervision</strong>: Automatic fault recovery at all levels</li><li><strong>Stateless Utilities</strong>: DHT operations don't hold state</li><li><strong>Connection Pooling</strong>: Gateway reuses QUIC connections (v0.9.0+)</li></ul><hr class="thin"/><h2 id="deployment-topologies" class="section-heading"><a href="#deployment-topologies" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Deployment Topologies</span></h2><h3 id="1-edge-first-mesh-iot-distributed-systems" class="section-heading"><a href="#1-edge-first-mesh-iot-distributed-systems" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">1. Edge-First Mesh (IoT, Distributed Systems)</span></h3><pre><code class="makeup erlang" translate="no"><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
</span><span class="err">│</span><span class="w">                     </span><span class="n">Cloud</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Data</span><span class="w"> </span><span class="n">Center</span><span class="w">                      </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">      </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">      </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">    </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="n">Bootstrap</span><span class="w"> </span><span class="err">│</span><span class="err">◄</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="w">  </span><span class="n">Bootstrap</span><span class="w"> </span><span class="err">│</span><span class="err">◄</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="w">  </span><span class="n">Bootstrap</span><span class="w"> </span><span class="err">│</span><span class="w">    </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">    </span><span class="n">Node</span><span class="w">    </span><span class="err">│</span><span class="w">      </span><span class="err">│</span><span class="w">    </span><span class="n">Node</span><span class="w">    </span><span class="err">│</span><span class="w">      </span><span class="err">│</span><span class="w">    </span><span class="n">Node</span><span class="w">    </span><span class="err">│</span><span class="w">    </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="p" data-group-id="6516927666-1">(</span><span class="n">DHT</span><span class="w"> </span><span class="n">Seed</span><span class="p" data-group-id="6516927666-1">)</span><span class="w"> </span><span class="err">│</span><span class="w">      </span><span class="err">│</span><span class="w"> </span><span class="p" data-group-id="6516927666-2">(</span><span class="n">DHT</span><span class="w"> </span><span class="n">Seed</span><span class="p" data-group-id="6516927666-2">)</span><span class="w"> </span><span class="err">│</span><span class="w">      </span><span class="err">│</span><span class="w"> </span><span class="p" data-group-id="6516927666-3">(</span><span class="n">DHT</span><span class="w"> </span><span class="n">Seed</span><span class="p" data-group-id="6516927666-3">)</span><span class="w"> </span><span class="err">│</span><span class="w">    </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▲</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">      </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▲</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">      </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▲</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">    </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w">                     </span><span class="err">│</span><span class="w">                   </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w">
</span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">
         </span><span class="err">│</span><span class="w">                     </span><span class="err">│</span><span class="w">                   </span><span class="err">│</span><span class="w">
    </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┴</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">           </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┴</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">        </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┴</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
    </span><span class="err">│</span><span class="w"> </span><span class="n">Gateway</span><span class="w"> </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w"> </span><span class="n">Gateway</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="n">Gateway</span><span class="w"> </span><span class="err">│</span><span class="w">
    </span><span class="err">│</span><span class="w">  </span><span class="n">Node</span><span class="w">   </span><span class="err">│</span><span class="err">◄</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="w">  </span><span class="n">Node</span><span class="w">   </span><span class="err">│</span><span class="err">◄</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="w">  </span><span class="n">Node</span><span class="w">   </span><span class="err">│</span><span class="w">
    </span><span class="err">│</span><span class="p" data-group-id="6516927666-4">(</span><span class="n">Relay</span><span class="o">+</span><span class="w">  </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="p" data-group-id="6516927666-5">(</span><span class="n">Relay</span><span class="o">+</span><span class="w">  </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="p" data-group-id="6516927666-6">(</span><span class="n">Relay</span><span class="o">+</span><span class="w">  </span><span class="err">│</span><span class="w">
    </span><span class="err">│</span><span class="w"> </span><span class="n">DHT</span><span class="p" data-group-id="6516927666-6">)</span><span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w"> </span><span class="n">DHT</span><span class="p" data-group-id="6516927666-5">)</span><span class="w">    </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="n">DHT</span><span class="p" data-group-id="6516927666-4">)</span><span class="w">    </span><span class="err">│</span><span class="w">
    </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▲</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">           </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▲</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">        </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▲</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">
         </span><span class="err">│</span><span class="w">                     </span><span class="err">│</span><span class="w">                   </span><span class="err">│</span><span class="w">
    </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┴</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">           </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┴</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">        </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┴</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
    </span><span class="err">│</span><span class="w">  </span><span class="n">Edge</span><span class="w">   </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w">  </span><span class="n">Edge</span><span class="w">   </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w">  </span><span class="n">Edge</span><span class="w">   </span><span class="err">│</span><span class="w">
    </span><span class="err">│</span><span class="w">  </span><span class="n">Peer</span><span class="w">   </span><span class="err">│</span><span class="err">◄</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="w">  </span><span class="n">Peer</span><span class="w">   </span><span class="err">│</span><span class="err">◄</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="w">  </span><span class="n">Peer</span><span class="w">   </span><span class="err">│</span><span class="w">
    </span><span class="err">│</span><span class="p" data-group-id="6516927666-7">(</span><span class="n">Behind</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="n">Direct</span><span class="w">   </span><span class="err">│</span><span class="p" data-group-id="6516927666-8">(</span><span class="n">Behind</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="n">Direct</span><span class="w"> </span><span class="err">│</span><span class="p" data-group-id="6516927666-9">(</span><span class="n">Behind</span><span class="w">  </span><span class="err">│</span><span class="w">
    </span><span class="err">│</span><span class="w">  </span><span class="n">NAT</span><span class="p" data-group-id="6516927666-9">)</span><span class="w">   </span><span class="err">│</span><span class="w">    </span><span class="n">P2P</span><span class="w">    </span><span class="err">│</span><span class="w">  </span><span class="n">NAT</span><span class="p" data-group-id="6516927666-8">)</span><span class="w">   </span><span class="err">│</span><span class="w">  </span><span class="n">P2P</span><span class="w">   </span><span class="err">│</span><span class="w">  </span><span class="n">NAT</span><span class="p" data-group-id="6516927666-7">)</span><span class="w">   </span><span class="err">│</span><span class="w">
    </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">  </span><span class="p" data-group-id="6516927666-10">(</span><span class="ss">v0</span><span class="p">.</span><span class="mf">8.0</span><span class="p" data-group-id="6516927666-10">)</span><span class="w"> </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w"> </span><span class="p" data-group-id="6516927666-11">(</span><span class="ss">v0</span><span class="p">.</span><span class="mf">8.0</span><span class="p" data-group-id="6516927666-11">)</span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">
         </span><span class="err">│</span><span class="w">                     </span><span class="err">│</span><span class="w">                   </span><span class="err">│</span><span class="w">
    </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">           </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">        </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
    </span><span class="err">│</span><span class="w"> </span><span class="n">Sensor</span><span class="w">  </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w"> </span><span class="n">Sensor</span><span class="w">  </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="n">Sensor</span><span class="w">  </span><span class="err">│</span><span class="w">
    </span><span class="err">│</span><span class="w"> </span><span class="n">Device</span><span class="w">  </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w"> </span><span class="n">Device</span><span class="w">  </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="n">Device</span><span class="w">  </span><span class="err">│</span><span class="w">
    </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">           </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">        </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span></code></pre><p><strong>Use Cases:</strong></p><ul><li>IoT networks with edge processing</li><li>Distributed sensor networks</li><li>Edge computing platforms</li><li>Multi-site deployments</li></ul><p><strong>Features:</strong></p><ul><li>Bootstrap nodes: DHT seeds (always available)</li><li>Gateway nodes: Relay for NAT-traversed peers</li><li>Edge peers: Application logic at the edge</li><li>Direct P2P: v0.8.0+ bypasses relay when possible</li></ul><hr class="thin"/><h3 id="2-microservices-mesh-kubernetes-cloud" class="section-heading"><a href="#2-microservices-mesh-kubernetes-cloud" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">2. Microservices Mesh (Kubernetes, Cloud)</span></h3><pre><code class="makeup erlang" translate="no"><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
</span><span class="err">│</span><span class="w">                    </span><span class="n">Kubernetes</span><span class="w"> </span><span class="n">Cluster</span><span class="w">                        </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">                                                               </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">              </span><span class="n">Namespace</span><span class="p">:</span><span class="w"> </span><span class="ss">macula</span><span class="o">-</span><span class="ss">system</span><span class="w">                 </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">                                                        </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">  </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">  </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">           </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="n">Bootstrap</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="n">Bootstrap</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="n">Bootstrap</span><span class="w"> </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">   </span><span class="n">Pod</span><span class="w">    </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">   </span><span class="n">Pod</span><span class="w">    </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">   </span><span class="n">Pod</span><span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="p" data-group-id="3256438959-1">(</span><span class="n">Headless</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="p" data-group-id="3256438959-2">(</span><span class="n">Headless</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="p" data-group-id="3256438959-3">(</span><span class="n">Headless</span><span class="w"> </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="n">Service</span><span class="p" data-group-id="3256438959-3">)</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="n">Service</span><span class="p" data-group-id="3256438959-2">)</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="n">Service</span><span class="p" data-group-id="3256438959-1">)</span><span class="w"> </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▲</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">  </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▲</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">  </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▲</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">           </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">       </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">                 </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">                         </span><span class="err">│</span><span class="w">                                     </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">              </span><span class="n">Namespace</span><span class="p">:</span><span class="w"> </span><span class="ss">app</span><span class="o">-</span><span class="ss">services</span><span class="w">                   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">                      </span><span class="err">│</span><span class="w">                                 </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">            </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">        </span><span class="n">Service</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="p" data-group-id="3256438959-4">(</span><span class="mi">3</span><span class="w"> </span><span class="ss">replicas</span><span class="p" data-group-id="3256438959-4">)</span><span class="w">        </span><span class="err">│</span><span class="w">            </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="err">│</span><span class="w">            </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="n">Pod</span><span class="w"> </span><span class="n">A1</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="n">Pod</span><span class="w"> </span><span class="n">A2</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="n">Pod</span><span class="w"> </span><span class="n">A3</span><span class="w"> </span><span class="err">│</span><span class="err">│</span><span class="w">            </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="p" data-group-id="3256438959-5">(</span><span class="ss">macula</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="p" data-group-id="3256438959-6">(</span><span class="ss">macula</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="p" data-group-id="3256438959-7">(</span><span class="ss">macula</span><span class="w">  </span><span class="err">│</span><span class="err">│</span><span class="w">            </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="ss">peer</span><span class="p" data-group-id="3256438959-7">)</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="ss">peer</span><span class="p" data-group-id="3256438959-6">)</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="ss">peer</span><span class="p" data-group-id="3256438959-5">)</span><span class="w">   </span><span class="err">│</span><span class="err">│</span><span class="w">            </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▲</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w"> </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▲</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w"> </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▲</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="err">│</span><span class="w">            </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">            </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">          </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w">                   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">          </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">                   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">                      </span><span class="err">│</span><span class="w">                               </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">            </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">        </span><span class="n">Service</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="p" data-group-id="3256438959-8">(</span><span class="mi">2</span><span class="w"> </span><span class="ss">replicas</span><span class="p" data-group-id="3256438959-8">)</span><span class="w">        </span><span class="err">│</span><span class="w">            </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">      </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">       </span><span class="err">│</span><span class="w">            </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="n">Pod</span><span class="w"> </span><span class="n">B1</span><span class="w"> </span><span class="err">│</span><span class="err">◄</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="w">  </span><span class="n">Pod</span><span class="w"> </span><span class="n">B2</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">            </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="p" data-group-id="3256438959-9">(</span><span class="ss">macula</span><span class="w">  </span><span class="err">│</span><span class="n">Direct</span><span class="err">│</span><span class="p" data-group-id="3256438959-10">(</span><span class="ss">macula</span><span class="w">  </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">            </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="ss">peer</span><span class="p" data-group-id="3256438959-10">)</span><span class="w">   </span><span class="err">│</span><span class="w">  </span><span class="n">P2P</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="ss">peer</span><span class="p" data-group-id="3256438959-9">)</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">            </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="p" data-group-id="3256438959-11">(</span><span class="ss">v0</span><span class="p">.</span><span class="mi">8</span><span class="p" data-group-id="3256438959-11">)</span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">       </span><span class="err">│</span><span class="w">            </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">             </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span></code></pre><p><strong>Use Cases:</strong></p><ul><li>Microservices communication</li><li>Service mesh alternative</li><li>Event-driven architectures</li><li>Multi-tenant platforms</li></ul><p><strong>Features:</strong></p><ul><li>No external message broker needed</li><li>Built-in service discovery via DHT</li><li>Realm-based multi-tenancy</li><li>Direct P2P between pods (v0.8.0+)</li></ul><hr class="thin"/><h3 id="3-hybrid-cloud-edge-best-of-both-worlds" class="section-heading"><a href="#3-hybrid-cloud-edge-best-of-both-worlds" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">3. Hybrid Cloud-Edge (Best of Both Worlds)</span></h3><pre><code class="makeup erlang" translate="no"><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
</span><span class="err">│</span><span class="w">                         </span><span class="n">Cloud</span><span class="w"> </span><span class="n">Region</span><span class="w">                         </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">      </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">      </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">    </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="n">Gateway</span><span class="w">   </span><span class="err">│</span><span class="err">◄</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="w">  </span><span class="n">Gateway</span><span class="w">   </span><span class="err">│</span><span class="err">◄</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="w">  </span><span class="n">Gateway</span><span class="w">   </span><span class="err">│</span><span class="w">    </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="p" data-group-id="4326541069-1">(</span><span class="n">Public</span><span class="w"> </span><span class="n">IP</span><span class="p" data-group-id="4326541069-1">)</span><span class="err">│</span><span class="w">      </span><span class="err">│</span><span class="w"> </span><span class="p" data-group-id="4326541069-2">(</span><span class="n">Public</span><span class="w"> </span><span class="n">IP</span><span class="p" data-group-id="4326541069-2">)</span><span class="err">│</span><span class="w">      </span><span class="err">│</span><span class="w"> </span><span class="p" data-group-id="4326541069-3">(</span><span class="n">Public</span><span class="w"> </span><span class="n">IP</span><span class="p" data-group-id="4326541069-3">)</span><span class="err">│</span><span class="w">    </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▲</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">      </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▲</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">      </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▲</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">    </span><span class="err">│</span><span class="w">
</span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">
         </span><span class="err">│</span><span class="w">                     </span><span class="err">│</span><span class="w">                   </span><span class="err">│</span><span class="w">
    </span><span class="n">Internet</span><span class="o">/</span><span class="n">WAN</span><span class="w">          </span><span class="n">Internet</span><span class="o">/</span><span class="n">WAN</span><span class="w">        </span><span class="n">Internet</span><span class="o">/</span><span class="n">WAN</span><span class="w">
         </span><span class="err">│</span><span class="w">                     </span><span class="err">│</span><span class="w">                   </span><span class="err">│</span><span class="w">
</span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
</span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w">                     </span><span class="err">│</span><span class="w">                   </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">           </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">        </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">     </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="n">Factory</span><span class="w"> </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w">  </span><span class="n">Retail</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w">  </span><span class="n">Office</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="n">Site</span><span class="w">  </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w">   </span><span class="n">Site</span><span class="w">  </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w">   </span><span class="n">Site</span><span class="w">  </span><span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">         </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w">         </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w">         </span><span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="n">Edge</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="n">Edge</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="n">Edge</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="n">Peer</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="n">Peer</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="n">Peer</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">▲</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w"> </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">▲</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">▲</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">    </span><span class="err">│</span><span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w">    </span><span class="err">│</span><span class="w">    </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w">    </span><span class="err">│</span><span class="w">    </span><span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">▼</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">▼</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">▼</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="n">Equip</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="n">POS</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="n">App</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w"> </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">   </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">           </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">        </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">     </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">                     </span><span class="n">Edge</span><span class="w"> </span><span class="n">Locations</span><span class="w">                           </span><span class="err">│</span><span class="w">
</span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span></code></pre><p><strong>Use Cases:</strong></p><ul><li>Retail chains with local processing</li><li>Manufacturing with edge analytics</li><li>Distributed branch offices</li><li>Multi-region applications</li></ul><p><strong>Features:</strong></p><ul><li>Cloud gateways for global reach</li><li>Edge peers for local processing</li><li>Automatic failover (relay ↔ direct P2P)</li><li>Low latency via direct connections</li></ul><hr class="thin"/><h2 id="supervision-trees" class="section-heading"><a href="#supervision-trees" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Supervision Trees</span></h2><h3 id="peer-supervision-tree" class="section-heading"><a href="#peer-supervision-tree" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Peer Supervision Tree</span></h3><pre><code class="makeup erlang" translate="no"><span class="w">                    </span><span class="ss">macula_peer_sup</span><span class="w">
                          </span><span class="err">│</span><span class="w">
        </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
        </span><span class="err">│</span><span class="w">                 </span><span class="err">│</span><span class="w">                 </span><span class="err">│</span><span class="w">
        </span><span class="err">▼</span><span class="w">                 </span><span class="err">▼</span><span class="w">                 </span><span class="err">▼</span><span class="w">
</span><span class="ss">macula_connection</span><span class="w">  </span><span class="ss">macula_pubsub_handler</span><span class="w">  </span><span class="nf">macula_rpc_handler</span><span class="w">
  </span><span class="p" data-group-id="0395347485-1">(</span><span class="n">QUIC</span><span class="w"> </span><span class="n">Layer</span><span class="p" data-group-id="0395347485-1">)</span><span class="w">      </span><span class="p" data-group-id="0395347485-2">(</span><span class="n">Pub</span><span class="o">/</span><span class="n">Sub</span><span class="w"> </span><span class="n">Logic</span><span class="p" data-group-id="0395347485-2">)</span><span class="w">       </span><span class="p" data-group-id="0395347485-3">(</span><span class="n">RPC</span><span class="w"> </span><span class="n">Logic</span><span class="p" data-group-id="0395347485-3">)</span><span class="w">
        </span><span class="err">│</span><span class="w">
        </span><span class="err">▼</span><span class="w">
</span><span class="nf">macula_advertisement_manager</span><span class="w">
  </span><span class="p" data-group-id="0395347485-4">(</span><span class="n">Service</span><span class="w"> </span><span class="n">Ads</span><span class="p" data-group-id="0395347485-4">)</span></code></pre><p><strong>Strategy</strong>: <code class="inline">one_for_all</code></p><ul><li>If any child crashes, restart all (coordinated state)</li><li>Connection is the foundation; handlers depend on it</li></ul><hr class="thin"/><h3 id="gateway-supervision-tree" class="section-heading"><a href="#gateway-supervision-tree" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Gateway Supervision Tree</span></h3><pre><code class="makeup erlang" translate="no"><span class="w">                    </span><span class="nf">macula_gateway_sup</span><span class="w"> </span><span class="p" data-group-id="7791219138-1">(</span><span class="n">Root</span><span class="p" data-group-id="7791219138-1">)</span><span class="w">
                            </span><span class="err">│</span><span class="w">
        </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
        </span><span class="err">│</span><span class="w">                   </span><span class="err">│</span><span class="w">                   </span><span class="err">│</span><span class="w">
        </span><span class="err">▼</span><span class="w">                   </span><span class="err">▼</span><span class="w">                   </span><span class="err">▼</span><span class="w">
</span><span class="ss">macula_gateway_</span><span class="w">    </span><span class="ss">macula_gateway</span><span class="w">    </span><span class="ss">macula_gateway_workers_sup</span><span class="w">
  </span><span class="nf">quic_server</span><span class="w">                               </span><span class="p" data-group-id="7791219138-2">(</span><span class="n">Supervisor</span><span class="p" data-group-id="7791219138-2">)</span><span class="w">
 </span><span class="p" data-group-id="7791219138-3">(</span><span class="n">QUIC</span><span class="w"> </span><span class="n">Listener</span><span class="p" data-group-id="7791219138-3">)</span><span class="w">   </span><span class="p" data-group-id="7791219138-4">(</span><span class="n">Coordinator</span><span class="p" data-group-id="7791219138-4">)</span><span class="w">                </span><span class="err">│</span><span class="w">
                                    </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
                                    </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w">           </span><span class="err">│</span><span class="w">
                                    </span><span class="err">▼</span><span class="w">           </span><span class="err">▼</span><span class="w">           </span><span class="err">▼</span><span class="w">
                          </span><span class="ss">client_manager</span><span class="w">  </span><span class="ss">pubsub_router</span><span class="w">  </span><span class="nf">rpc_handler</span><span class="w">
                            </span><span class="p" data-group-id="7791219138-5">(</span><span class="n">Lifecycle</span><span class="p" data-group-id="7791219138-5">)</span><span class="w">    </span><span class="p" data-group-id="7791219138-6">(</span><span class="n">Routing</span><span class="p" data-group-id="7791219138-6">)</span><span class="w">     </span><span class="p" data-group-id="7791219138-7">(</span><span class="n">Registry</span><span class="p" data-group-id="7791219138-7">)</span><span class="w">
                                    </span><span class="err">│</span><span class="w">
                                    </span><span class="err">▼</span><span class="w">
                              </span><span class="nf">mesh_connection_manager</span><span class="w">
                                 </span><span class="p" data-group-id="7791219138-8">(</span><span class="n">Pool</span><span class="p" data-group-id="7791219138-8">)</span></code></pre><p><strong>Strategy</strong>: <code class="inline">rest_for_one</code> (top-level)</p><ul><li>QUIC server starts first</li><li>Gateway coordinates</li><li>Workers handle business logic</li><li>If QUIC crashes, restart everything</li><li>If worker crashes, only restart later siblings</li></ul><p><strong>Strategy</strong>: <code class="inline">one_for_one</code> (workers)</p><ul><li>Each worker independent</li><li>Failures isolated to single worker</li></ul><hr class="thin"/><h2 id="message-flow-patterns" class="section-heading"><a href="#message-flow-patterns" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Message Flow Patterns</span></h2><h3 id="rpc-flow-v0-8-0-direct-p2p" class="section-heading"><a href="#rpc-flow-v0-8-0-direct-p2p" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">RPC Flow (v0.8.0 Direct P2P)</span></h3><pre><code class="makeup erlang" translate="no"><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">                                         </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
</span><span class="err">│</span><span class="w"> </span><span class="n">Client</span><span class="w">  </span><span class="err">│</span><span class="w">                                         </span><span class="err">│</span><span class="n">Provider</span><span class="w"> </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="n">Peer</span><span class="w">   </span><span class="err">│</span><span class="w">                                         </span><span class="err">│</span><span class="w">  </span><span class="n">Peer</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┬</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">                                         </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┬</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">
     </span><span class="err">│</span><span class="w">                                                    </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="nf">call</span><span class="p" data-group-id="6926023572-1">(</span><span class="s">&quot;service.add&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6926023572-2">#{</span><span class="ss">a</span><span class="p">=&gt;</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="ss">b</span><span class="p">=&gt;</span><span class="mi">3</span><span class="p" data-group-id="6926023572-2">}</span><span class="p" data-group-id="6926023572-1">)</span><span class="w">            </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">                 </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                                 </span><span class="err">│</span><span class="w">                 </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                                 </span><span class="err">▼</span><span class="w">                 </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                           </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">            </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                           </span><span class="err">│</span><span class="w">   </span><span class="n">DHT</span><span class="w">    </span><span class="err">│</span><span class="w">            </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                           </span><span class="err">│</span><span class="w"> </span><span class="p" data-group-id="6926023572-3">(</span><span class="n">Find</span><span class="w">    </span><span class="err">│</span><span class="w">            </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                           </span><span class="err">│</span><span class="w"> </span><span class="n">Service</span><span class="p" data-group-id="6926023572-3">)</span><span class="w"> </span><span class="err">│</span><span class="w">            </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                           </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┬</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">            </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                                </span><span class="err">│</span><span class="w">                  </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w"> </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="n">Returns</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.50:9443&quot;</span><span class="w">                  </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="err">◄</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">                 </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                                                   </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w"> </span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="n">Direct</span><span class="w"> </span><span class="n">QUIC</span><span class="w"> </span><span class="n">Connection</span><span class="w">                        </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">   </span><span class="n">RPC_REQUEST</span><span class="p">:</span><span class="w"> </span><span class="ss">service</span><span class="p">.</span><span class="ss">add</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6926023572-4">{</span><span class="nc">a</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="nc">b</span><span class="p">:</span><span class="mi">3</span><span class="p" data-group-id="6926023572-4">}</span><span class="w">           </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                                                   </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                                  </span><span class="mi">4</span><span class="p">.</span><span class="w"> </span><span class="n">Execute</span><span class="w"> </span><span class="n">Handler</span><span class="w">
     </span><span class="err">│</span><span class="w">                                     </span><span class="n">Result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="w">    </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                                                   </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w"> </span><span class="mi">5</span><span class="p">.</span><span class="w"> </span><span class="n">RPC_RESPONSE</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6926023572-5">{</span><span class="nc">result</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p" data-group-id="6926023572-5">}</span><span class="w">                     </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="err">◄</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                                                   </span><span class="err">│</span><span class="w">
     </span><span class="err">▼</span><span class="w">                                                   </span><span class="err">▼</span><span class="w">
  </span><span class="n">Returns</span><span class="w">                                            </span><span class="n">Handler</span><span class="w">
</span><span class="p" data-group-id="6926023572-6">{</span><span class="ss">ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6926023572-7">#{</span><span class="ss">result</span><span class="p">=&gt;</span><span class="mi">8</span><span class="p" data-group-id="6926023572-7">}</span><span class="p" data-group-id="6926023572-6">}</span><span class="w">                                   </span><span class="n">Executed</span></code></pre><p><strong>Performance</strong>: 1-hop (direct), ~10-50ms latency
<strong>Fallback</strong>: If direct fails, relay via gateway (2-3 hops)</p><hr class="thin"/><h3 id="pubsub-flow-v0-8-0-direct-p2p" class="section-heading"><a href="#pubsub-flow-v0-8-0-direct-p2p" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">PubSub Flow (v0.8.0 Direct P2P)</span></h3><pre><code class="makeup erlang" translate="no"><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">                                      </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
</span><span class="err">│</span><span class="n">Publisher</span><span class="w"> </span><span class="err">│</span><span class="w">                                      </span><span class="err">│</span><span class="n">Subscriber</span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">   </span><span class="n">Peer</span><span class="w">   </span><span class="err">│</span><span class="w">                                      </span><span class="err">│</span><span class="w">   </span><span class="n">Peer</span><span class="w">   </span><span class="err">│</span><span class="w">
</span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┬</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">                                      </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┬</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">
     </span><span class="err">│</span><span class="w">                                                 </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="nf">subscribe</span><span class="p" data-group-id="3380243642-1">(</span><span class="s">&quot;sensor.temp&quot;</span><span class="p" data-group-id="3380243642-1">)</span><span class="w">                    </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                              </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">      </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                              </span><span class="err">│</span><span class="w">   </span><span class="n">DHT</span><span class="w">    </span><span class="err">│</span><span class="w">      </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                              </span><span class="err">│</span><span class="w">  </span><span class="n">Store</span><span class="p">:</span><span class="w">  </span><span class="err">│</span><span class="err">◄</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┤</span><span class="w">
     </span><span class="err">│</span><span class="w">                              </span><span class="err">│</span><span class="s">&quot;sensor.&quot;</span><span class="w"> </span><span class="err">│</span><span class="w">      </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                              </span><span class="err">│</span><span class="s">&quot;temp&quot;</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="err">│</span><span class="w">      </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                              </span><span class="err">│</span><span class="mf">192.1</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="n">X</span><span class="w"> </span><span class="err">│</span><span class="w">      </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                              </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">      </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                                                 </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w"> </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="nf">publish</span><span class="p" data-group-id="3380243642-2">(</span><span class="s">&quot;sensor.temp&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3380243642-3">{</span><span class="nc">celsius</span><span class="p">:</span><span class="w"> </span><span class="mf">21.5</span><span class="p" data-group-id="3380243642-3">}</span><span class="p" data-group-id="3380243642-2">)</span><span class="w">     </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">                              </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                  </span><span class="err">│</span><span class="w">                              </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                  </span><span class="err">▼</span><span class="w">                              </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">            </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">                         </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">            </span><span class="err">│</span><span class="w">   </span><span class="n">DHT</span><span class="w">    </span><span class="err">│</span><span class="w">                         </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">            </span><span class="err">│</span><span class="w"> </span><span class="n">Find</span><span class="p">:</span><span class="w">    </span><span class="err">│</span><span class="w">                         </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">            </span><span class="err">│</span><span class="s">&quot;sensor.&quot;</span><span class="w"> </span><span class="err">│</span><span class="w">                         </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">            </span><span class="err">│</span><span class="w">  </span><span class="s">&quot;temp&quot;</span><span class="w">  </span><span class="err">│</span><span class="w">                         </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">            </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┬</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">                         </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                 </span><span class="err">│</span><span class="w">                               </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w"> </span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="n">Returns</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.X:9443&quot;</span><span class="w">                 </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="err">◄</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">                              </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                                                 </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w"> </span><span class="mi">4</span><span class="p">.</span><span class="w"> </span><span class="n">Direct</span><span class="w"> </span><span class="n">QUIC</span><span class="w"> </span><span class="n">Connection</span><span class="w">                      </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">   </span><span class="n">PUBLISH</span><span class="p">:</span><span class="w"> </span><span class="ss">sensor</span><span class="p">.</span><span class="ss">temp</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3380243642-4">{</span><span class="nc">celsius</span><span class="p">:</span><span class="w"> </span><span class="mf">21.5</span><span class="p" data-group-id="3380243642-4">}</span><span class="w">        </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                                                 </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                                  </span><span class="mi">5</span><span class="p">.</span><span class="w"> </span><span class="n">Deliver</span><span class="w"> </span><span class="ss">to</span><span class="w">  </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                                     </span><span class="n">Subscriber</span><span class="w">  </span><span class="err">│</span><span class="w">
     </span><span class="err">│</span><span class="w">                                                 </span><span class="err">▼</span><span class="w">
     </span><span class="err">│</span><span class="w">                                        </span><span class="k">receive</span><span class="w"> </span><span class="p" data-group-id="3380243642-5">{</span><span class="ss">macula_event</span><span class="p">,</span><span class="w">
     </span><span class="err">│</span><span class="w">                                                 </span><span class="s">&quot;sensor.temp&quot;</span><span class="p">,</span><span class="w">
     </span><span class="err">│</span><span class="w">                                                 </span><span class="p" data-group-id="3380243642-6">#{</span><span class="ss">celsius</span><span class="p">=&gt;</span><span class="mf">21.5</span><span class="p" data-group-id="3380243642-6">}</span><span class="p" data-group-id="3380243642-5">}</span></code></pre><p><strong>Performance</strong>: 1-hop (direct), ~10-50ms latency
<strong>Wildcard Support</strong>: <code class="inline">sensor.*</code> matches <code class="inline">sensor.temp</code>, <code class="inline">sensor.pressure</code>
<strong>Fanout</strong>: One DHT query finds all subscribers</p><hr class="thin"/><h2 id="dht-architecture" class="section-heading"><a href="#dht-architecture" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">DHT Architecture</span></h2><h3 id="kademlia-xor-distance" class="section-heading"><a href="#kademlia-xor-distance" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Kademlia XOR Distance</span></h3><pre><code class="makeup erlang" translate="no"><span class="n">Node</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">Space</span><span class="w"> </span><span class="p" data-group-id="2048395413-1">(</span><span class="mi">160</span><span class="o">-</span><span class="ss">bit</span><span class="p" data-group-id="2048395413-1">)</span><span class="p">:</span><span class="w">

    </span><span class="mi">0</span><span class="w">                                              </span><span class="mi">2</span><span class="err">^</span><span class="mi">160</span><span class="w">
    </span><span class="err">├</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┤</span><span class="w">

    </span><span class="n">Distance</span><span class="p" data-group-id="2048395413-2">(</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">B</span><span class="p" data-group-id="2048395413-2">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">XOR</span><span class="w"> </span><span class="n">B</span><span class="w">

    </span><span class="n">Example</span><span class="p">:</span><span class="w">
    </span><span class="n">Node</span><span class="w"> </span><span class="n">A</span><span class="p">:</span><span class="w"> </span><span class="mi">1010</span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="w">
    </span><span class="n">Node</span><span class="w"> </span><span class="n">B</span><span class="p">:</span><span class="w"> </span><span class="mi">1100</span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="w">
    </span><span class="n">XOR</span><span class="p">:</span><span class="w">    </span><span class="mi">0110</span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="w"> </span><span class="p" data-group-id="2048395413-3">(</span><span class="ss">closer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">smaller</span><span class="w"> </span><span class="ss">distance</span><span class="p" data-group-id="2048395413-3">)</span></code></pre><h3 id="routing-table-k-buckets" class="section-heading"><a href="#routing-table-k-buckets" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Routing Table (K-Buckets)</span></h3><pre><code class="makeup erlang" translate="no"><span class="n">Each</span><span class="w"> </span><span class="nb">node</span><span class="w"> </span><span class="nc">maintains</span><span class="p">:</span><span class="w">

</span><span class="n">Bucket</span><span class="w"> </span><span class="mi">0</span><span class="p">:</span><span class="w">  </span><span class="n">Nodes</span><span class="w"> </span><span class="mi">2</span><span class="err">^</span><span class="mi">0</span><span class="w">    </span><span class="ss">distance</span><span class="w"> </span><span class="ss">away</span><span class="w">  </span><span class="p" data-group-id="9524964751-1">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="ss">bits</span><span class="w"> </span><span class="ss">different</span><span class="p" data-group-id="9524964751-1">]</span><span class="w">
</span><span class="n">Bucket</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="n">Nodes</span><span class="w"> </span><span class="mi">2</span><span class="err">^</span><span class="mi">1</span><span class="w">    </span><span class="ss">distance</span><span class="w"> </span><span class="ss">away</span><span class="w">  </span><span class="p" data-group-id="9524964751-2">[</span><span class="mi">1</span><span class="o">-</span><span class="mi">2</span><span class="w"> </span><span class="ss">bits</span><span class="w"> </span><span class="ss">different</span><span class="p" data-group-id="9524964751-2">]</span><span class="w">
</span><span class="n">Bucket</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="n">Nodes</span><span class="w"> </span><span class="mi">2</span><span class="err">^</span><span class="mi">2</span><span class="w">    </span><span class="ss">distance</span><span class="w"> </span><span class="ss">away</span><span class="w">  </span><span class="p" data-group-id="9524964751-3">[</span><span class="mi">2</span><span class="o">-</span><span class="mi">4</span><span class="w"> </span><span class="ss">bits</span><span class="w"> </span><span class="ss">different</span><span class="p" data-group-id="9524964751-3">]</span><span class="w">
</span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="w">
</span><span class="n">Bucket</span><span class="w"> </span><span class="mi">159</span><span class="p">:</span><span class="w"> </span><span class="n">Nodes</span><span class="w"> </span><span class="mi">2</span><span class="err">^</span><span class="mi">159</span><span class="w"> </span><span class="ss">distance</span><span class="w"> </span><span class="ss">away</span><span class="w">  </span><span class="p" data-group-id="9524964751-4">[</span><span class="mi">159</span><span class="o">-</span><span class="mi">160</span><span class="w"> </span><span class="ss">bits</span><span class="w"> </span><span class="ss">different</span><span class="p" data-group-id="9524964751-4">]</span><span class="w">

</span><span class="n">Each</span><span class="w"> </span><span class="ss">bucket</span><span class="w"> </span><span class="ss">holds</span><span class="w"> </span><span class="ss">up</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="ss">k</span><span class="o">=</span><span class="mi">20</span><span class="w"> </span><span class="nf">nodes</span><span class="w"> </span><span class="p" data-group-id="9524964751-5">(</span><span class="ss">sorted</span><span class="w"> </span><span class="ss">by</span><span class="w"> </span><span class="ss">last</span><span class="o">-</span><span class="ss">seen</span><span class="w"> </span><span class="ss">time</span><span class="p" data-group-id="9524964751-5">)</span></code></pre><h3 id="dht-operations" class="section-heading"><a href="#dht-operations" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">DHT Operations</span></h3><h4>STORE Operation (k=20 Propagation)</h4><pre><code class="makeup erlang" translate="no"><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="n">Hash</span><span class="w"> </span><span class="nc">key</span><span class="p">:</span><span class="w"> </span><span class="nf">hash</span><span class="p" data-group-id="1698328265-1">(</span><span class="s">&quot;service.calculator.add&quot;</span><span class="p" data-group-id="1698328265-1">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">node_id</span><span class="w">
</span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="n">Find</span><span class="w"> </span><span class="ss">k</span><span class="o">=</span><span class="mi">20</span><span class="w"> </span><span class="ss">closest</span><span class="w"> </span><span class="nb">nodes</span><span class="w"> </span><span class="ss">via</span><span class="w"> </span><span class="ss">iterative</span><span class="w"> </span><span class="ss">lookup</span><span class="w">
</span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="n">Send</span><span class="w"> </span><span class="n">STORE</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="ss">all</span><span class="w"> </span><span class="ss">k</span><span class="w"> </span><span class="nb">nodes</span><span class="w">
</span><span class="mi">4</span><span class="p">.</span><span class="w"> </span><span class="n">Each</span><span class="w"> </span><span class="nb">node</span><span class="w"> </span><span class="nc">stores</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1698328265-2">{</span><span class="ss">key</span><span class="p">,</span><span class="w"> </span><span class="ss">value</span><span class="p">,</span><span class="w"> </span><span class="ss">ttl</span><span class="p" data-group-id="1698328265-2">}</span><span class="w">

</span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">  </span><span class="n">STORE</span><span class="w">   </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="n">Node</span><span class="w">  </span><span class="err">├</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="w"> </span><span class="n">Node</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="p" data-group-id="1698328265-3">(</span><span class="ss">closest</span><span class="p" data-group-id="1698328265-3">)</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="p" data-group-id="1698328265-4">(</span><span class="n">You</span><span class="p" data-group-id="1698328265-4">)</span><span class="w"> </span><span class="err">├</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="w"> </span><span class="n">Node</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">        </span><span class="err">├</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="w"> </span><span class="n">Node</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">        </span><span class="err">├</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="w">   </span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="w">  </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">        </span><span class="err">├</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="n">Node</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="err">│</span><span class="w">
</span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">          </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span></code></pre><h4>FIND_VALUE Operation</h4><pre><code class="makeup erlang" translate="no"><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="n">Hash</span><span class="w"> </span><span class="nc">key</span><span class="p">:</span><span class="w"> </span><span class="nf">hash</span><span class="p" data-group-id="2897516639-1">(</span><span class="s">&quot;service.calculator.add&quot;</span><span class="p" data-group-id="2897516639-1">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">target_id</span><span class="w">
</span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="n">Query</span><span class="w"> </span><span class="ss">closest</span><span class="w"> </span><span class="ss">known</span><span class="w"> </span><span class="nb">nodes</span><span class="w">
</span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="ss">found</span><span class="p">,</span><span class="w"> </span><span class="ss">return</span><span class="w"> </span><span class="ss">value</span><span class="w">
</span><span class="mi">4</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="ss">found</span><span class="p">,</span><span class="w"> </span><span class="ss">return</span><span class="w"> </span><span class="ss">closer</span><span class="w"> </span><span class="nb">nodes</span><span class="w">
</span><span class="mi">5</span><span class="p">.</span><span class="w"> </span><span class="n">Repeat</span><span class="w"> </span><span class="ss">until</span><span class="w"> </span><span class="ss">value</span><span class="w"> </span><span class="ss">found</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="ss">no</span><span class="w"> </span><span class="ss">closer</span><span class="w"> </span><span class="nb">nodes</span><span class="w">

</span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">  </span><span class="n">FIND</span><span class="w">    </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="n">Node</span><span class="w">  </span><span class="err">├</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="w"> </span><span class="n">Node</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="err">│</span><span class="err">─</span><span class="err">┐</span><span class="w">
</span><span class="err">│</span><span class="w">  </span><span class="p" data-group-id="2897516639-2">(</span><span class="n">You</span><span class="p" data-group-id="2897516639-2">)</span><span class="w"> </span><span class="err">│</span><span class="err">◄</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┤</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="s">&quot;Not found,
│        │  Closer  └────────┘ │  try Node B&quot;</span><span class="w">
</span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w">   </span><span class="n">Nodes</span><span class="w">              </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w">                      </span><span class="err">▼</span><span class="w">
</span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w">  </span><span class="n">FIND</span><span class="w">    </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
</span><span class="err">│</span><span class="w">        </span><span class="err">├</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="w"> </span><span class="n">Node</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="err">│</span><span class="w">
</span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="err">◄</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┤</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="s">&quot;Found! Here&#39;s
│        │  Value   └────────┘  the value&quot;</span><span class="w">
</span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span></code></pre><p><strong>Complexity</strong>: O(log N) hops to find any key
<strong>Redundancy</strong>: k=20 replication for fault tolerance</p><hr class="thin"/><h2 id="direct-p2p-connections-v0-8-0" class="section-heading"><a href="#direct-p2p-connections-v0-8-0" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Direct P2P Connections (v0.8.0)</span></h2><h3 id="connection-strategy" class="section-heading"><a href="#connection-strategy" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Connection Strategy</span></h3><pre><code class="makeup erlang" translate="no"><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
</span><span class="err">│</span><span class="w">                    </span><span class="n">Connection</span><span class="w"> </span><span class="n">Decision</span><span class="w"> </span><span class="n">Flow</span><span class="w">                  </span><span class="err">│</span><span class="w">
</span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">

        </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
        </span><span class="err">│</span><span class="w">  </span><span class="n">Need</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="nb">send</span><span class="w"> </span><span class="ss">message</span><span class="w">   </span><span class="err">│</span><span class="w">
        </span><span class="err">│</span><span class="w">  </span><span class="p" data-group-id="6217717961-1">(</span><span class="n">RPC</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">PubSub</span><span class="p" data-group-id="6217717961-1">)</span><span class="w">        </span><span class="err">│</span><span class="w">
        </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┬</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">
                    </span><span class="err">│</span><span class="w">
                    </span><span class="err">▼</span><span class="w">
        </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
        </span><span class="err">│</span><span class="w">  </span><span class="n">Query</span><span class="w"> </span><span class="n">DHT</span><span class="w"> </span><span class="ss">for</span><span class="w"> </span><span class="ss">endpoint</span><span class="w"> </span><span class="err">│</span><span class="w">
        </span><span class="err">│</span><span class="w">  </span><span class="p" data-group-id="6217717961-2">(</span><span class="n">IP</span><span class="p">:</span><span class="n">Port</span><span class="w"> </span><span class="ss">discovered</span><span class="p" data-group-id="6217717961-2">)</span><span class="w">   </span><span class="err">│</span><span class="w">
        </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┬</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">
                    </span><span class="err">│</span><span class="w">
                    </span><span class="err">▼</span><span class="w">
        </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
        </span><span class="err">│</span><span class="w">  </span><span class="n">Attempt</span><span class="w"> </span><span class="n">Direct</span><span class="w"> </span><span class="n">P2P</span><span class="w">     </span><span class="err">│</span><span class="w">
        </span><span class="err">│</span><span class="w">  </span><span class="ss">via</span><span class="w"> </span><span class="ss">peer_connector</span><span class="w">     </span><span class="err">│</span><span class="w">
        </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┬</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">
                    </span><span class="err">│</span><span class="w">
            </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┴</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
            </span><span class="err">│</span><span class="w">               </span><span class="err">│</span><span class="w">
       </span><span class="n">Success</span><span class="w">           </span><span class="n">Failure</span><span class="w">
            </span><span class="err">│</span><span class="w">               </span><span class="err">│</span><span class="w">
            </span><span class="err">▼</span><span class="w">               </span><span class="err">▼</span><span class="w">
    </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">   </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
    </span><span class="err">│</span><span class="w">   </span><span class="n">Message</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">  </span><span class="n">Fallback</span><span class="w">   </span><span class="err">│</span><span class="w">
    </span><span class="err">│</span><span class="w">  </span><span class="n">Delivered</span><span class="w">  </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">  </span><span class="ss">to</span><span class="w"> </span><span class="n">Gateway</span><span class="w"> </span><span class="err">│</span><span class="w">
    </span><span class="err">│</span><span class="w">   </span><span class="p" data-group-id="6217717961-3">(</span><span class="mi">1</span><span class="o">-</span><span class="ss">hop</span><span class="p" data-group-id="6217717961-3">)</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="n">Relay</span><span class="w">     </span><span class="err">│</span><span class="w">
    </span><span class="err">│</span><span class="w">             </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">  </span><span class="p" data-group-id="6217717961-4">(</span><span class="mi">2</span><span class="o">-</span><span class="mi">3</span><span class="w"> </span><span class="ss">hops</span><span class="p" data-group-id="6217717961-4">)</span><span class="w"> </span><span class="err">│</span><span class="w">
    </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">   </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">
        </span><span class="err">│</span><span class="w">                     </span><span class="err">│</span><span class="w">
        </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┬</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">
                   </span><span class="err">│</span><span class="w">
                   </span><span class="err">▼</span><span class="w">
          </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
          </span><span class="err">│</span><span class="w"> </span><span class="mi">100</span><span class="c1">% Reliability│</span><span class="w">
          </span><span class="err">│</span><span class="w">  </span><span class="n">Guaranteed</span><span class="w">     </span><span class="err">│</span><span class="w">
          </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span></code></pre><p><strong>Benefits</strong>:</p><ul><li>50% latency reduction when direct succeeds</li><li>Automatic fallback ensures reliability</li><li>Gateway load reduced (more direct connections = less relay traffic)</li></ul><hr class="thin"/><h3 id="performance-comparison" class="section-heading"><a href="#performance-comparison" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Performance Comparison</span></h3><pre><code class="makeup erlang" translate="no"><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
</span><span class="err">│</span><span class="w">              </span><span class="n">Message</span><span class="w"> </span><span class="n">Delivery</span><span class="w"> </span><span class="n">Latency</span><span class="w"> </span><span class="p" data-group-id="5425359817-1">(</span><span class="ss">ms</span><span class="p" data-group-id="5425359817-1">)</span><span class="w">                   </span><span class="err">│</span><span class="w">
</span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">

</span><span class="ss">v0</span><span class="p">.</span><span class="mi">7</span><span class="p">.</span><span class="nf">x</span><span class="w"> </span><span class="p" data-group-id="5425359817-2">(</span><span class="n">Relay</span><span class="o">-</span><span class="n">Only</span><span class="p" data-group-id="5425359817-2">)</span><span class="p">:</span><span class="w">
</span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">    </span><span class="mi">50</span><span class="ss">ms</span><span class="w">    </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">    </span><span class="mi">50</span><span class="ss">ms</span><span class="w">    </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
</span><span class="err">│</span><span class="n">Client</span><span class="w"> </span><span class="err">│</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="w"> </span><span class="n">Gateway</span><span class="w"> </span><span class="err">│</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="n">Server</span><span class="w"> </span><span class="err">│</span><span class="w">
</span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">            </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">            </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">
</span><span class="n">Total</span><span class="p">:</span><span class="w"> </span><span class="err">~</span><span class="mi">100</span><span class="nf">ms</span><span class="w"> </span><span class="p" data-group-id="5425359817-3">(</span><span class="mi">2</span><span class="o">-</span><span class="ss">hop</span><span class="w"> </span><span class="ss">minimum</span><span class="p" data-group-id="5425359817-3">)</span><span class="w">


</span><span class="ss">v0</span><span class="p">.</span><span class="mf">8.0</span><span class="w"> </span><span class="p" data-group-id="5425359817-4">(</span><span class="n">Direct</span><span class="w"> </span><span class="n">P2P</span><span class="p" data-group-id="5425359817-4">)</span><span class="p">:</span><span class="w">
</span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">           </span><span class="mi">50</span><span class="ss">ms</span><span class="w">              </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
</span><span class="err">│</span><span class="n">Client</span><span class="w"> </span><span class="err">│</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">►</span><span class="err">│</span><span class="n">Server</span><span class="w"> </span><span class="err">│</span><span class="w">
</span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">                             </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">
</span><span class="n">Total</span><span class="p">:</span><span class="w"> </span><span class="err">~</span><span class="mi">50</span><span class="nf">ms</span><span class="w"> </span><span class="p" data-group-id="5425359817-5">(</span><span class="mi">1</span><span class="o">-</span><span class="ss">hop</span><span class="w"> </span><span class="ss">direct</span><span class="p" data-group-id="5425359817-5">)</span><span class="w">

</span><span class="mi">50</span><span class="c1">% Improvement! 🚀</span></code></pre><hr class="thin"/><h2 id="module-dependencies" class="section-heading"><a href="#module-dependencies" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Module Dependencies</span></h2><pre><code class="makeup erlang" translate="no"><span class="n">Application</span><span class="w"> </span><span class="n">Layer</span><span class="w">
       </span><span class="err">│</span><span class="w">
       </span><span class="err">▼</span><span class="w">
</span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
</span><span class="err">│</span><span class="w">              </span><span class="nf">macula_peer</span><span class="w"> </span><span class="p" data-group-id="2236709444-1">(</span><span class="n">API</span><span class="w"> </span><span class="n">Facade</span><span class="p" data-group-id="2236709444-1">)</span><span class="w">               </span><span class="err">│</span><span class="w">
</span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┬</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┬</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">
             </span><span class="err">│</span><span class="w">                      </span><span class="err">│</span><span class="w">
   </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">  </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
   </span><span class="err">│</span><span class="w"> </span><span class="ss">macula_connection</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="ss">macula_pubsub_</span><span class="w">   </span><span class="err">│</span><span class="w">
   </span><span class="err">│</span><span class="w">  </span><span class="p" data-group-id="2236709444-2">(</span><span class="n">QUIC</span><span class="w"> </span><span class="n">Transport</span><span class="p" data-group-id="2236709444-2">)</span><span class="w">  </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">    </span><span class="ss">handler</span><span class="w">       </span><span class="err">│</span><span class="w">
   </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┬</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">  </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┬</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">
             </span><span class="err">│</span><span class="w">                      </span><span class="err">│</span><span class="w">
   </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">  </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
   </span><span class="err">│</span><span class="w">  </span><span class="ss">macula_quic</span><span class="w">       </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="ss">macula_pubsub_</span><span class="w">   </span><span class="err">│</span><span class="w">
   </span><span class="err">│</span><span class="w">   </span><span class="p" data-group-id="2236709444-3">(</span><span class="n">MsQuic</span><span class="w"> </span><span class="n">FFI</span><span class="p" data-group-id="2236709444-3">)</span><span class="w">     </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">      </span><span class="ss">dht</span><span class="w">         </span><span class="err">│</span><span class="w">
   </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">  </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┬</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">
                                    </span><span class="err">│</span><span class="w">
   </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
   </span><span class="err">│</span><span class="w">      </span><span class="nf">macula_routing_server</span><span class="w"> </span><span class="p" data-group-id="2236709444-4">(</span><span class="n">DHT</span><span class="p" data-group-id="2236709444-4">)</span><span class="w">         </span><span class="err">│</span><span class="w">
   </span><span class="err">│</span><span class="w">    </span><span class="p" data-group-id="2236709444-5">(</span><span class="n">Kademlia</span><span class="p">,</span><span class="w"> </span><span class="ss">k</span><span class="o">=</span><span class="mi">20</span><span class="w"> </span><span class="ss">replication</span><span class="p" data-group-id="2236709444-5">)</span><span class="w">          </span><span class="err">│</span><span class="w">
   </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span><span class="w">
             </span><span class="err">│</span><span class="w">
   </span><span class="err">┌</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">▼</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┐</span><span class="w">
   </span><span class="err">│</span><span class="w"> </span><span class="ss">macula_routing_</span><span class="w">    </span><span class="err">│</span><span class="w">
   </span><span class="err">│</span><span class="w">      </span><span class="ss">table</span><span class="w">         </span><span class="err">│</span><span class="w">
   </span><span class="err">│</span><span class="w">  </span><span class="p" data-group-id="2236709444-6">(</span><span class="n">K</span><span class="o">-</span><span class="ss">buckets</span><span class="p" data-group-id="2236709444-6">)</span><span class="w">       </span><span class="err">│</span><span class="w">
   </span><span class="err">└</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">─</span><span class="err">┘</span></code></pre><p><strong>Layered Architecture</strong>:</p><ol><li><strong>API Layer</strong>: High-level user-facing API</li><li><strong>Business Logic</strong>: Pub/sub, RPC, advertisements</li><li><strong>Transport Layer</strong>: QUIC connections and streams</li><li><strong>Discovery Layer</strong>: DHT for service/subscriber lookup</li><li><strong>Routing Layer</strong>: Kademlia routing table</li></ol><hr class="thin"/><h2 id="key-takeaways-for-architects" class="section-heading"><a href="#key-takeaways-for-architects" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Key Takeaways for Architects</span></h2><h3 id="what-makes-macula-unique" class="section-heading"><a href="#what-makes-macula-unique" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">✅ What Makes Macula Unique</span></h3><ol><li><p><strong>BEAM-Native</strong></p><ul><li>OTP supervision for automatic fault recovery</li><li>Process-per-connection scalability</li><li>Erlang's proven distributed systems DNA</li></ul></li><li><p><strong>Modern Transport</strong></p><ul><li>HTTP/3 (QUIC) instead of TCP</li><li>Built-in encryption (TLS 1.3)</li><li>NAT/firewall friendly</li><li>Multiplexed streams</li></ul></li><li><p><strong>Self-Organizing</strong></p><ul><li>No centralized message broker</li><li>DHT-based service discovery (Kademlia)</li><li>Automatic replication (k=20)</li><li>O(log N) lookup complexity</li></ul></li><li><p><strong>Direct P2P (v0.8.0)</strong></p><ul><li>50% latency improvement</li><li>Bypasses relay when possible</li><li>Automatic fallback for reliability</li><li>Scales better (less gateway load)</li></ul></li><li><p><strong>Multi-Tenancy</strong></p><ul><li>Realm-based isolation</li><li>Share infrastructure, isolate traffic</li><li>Perfect for SaaS platforms</li></ul></li></ol><hr class="thin"/><h3 id="performance-characteristics" class="section-heading"><a href="#performance-characteristics" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">🚀 Performance Characteristics</span></h3><table><thead><tr><th style="text-align: left;">Metric</th><th style="text-align: left;">Value</th><th style="text-align: left;">Notes</th></tr></thead><tbody><tr><td style="text-align: left;"><strong>Message Latency</strong></td><td style="text-align: left;">~50ms</td><td style="text-align: left;">Direct P2P (v0.8.0)</td></tr><tr><td style="text-align: left;"></td><td style="text-align: left;">~100ms</td><td style="text-align: left;">Relay via gateway</td></tr><tr><td style="text-align: left;"><strong>DHT Lookup</strong></td><td style="text-align: left;">O(log N)</td><td style="text-align: left;">Kademlia routing</td></tr><tr><td style="text-align: left;"><strong>Replication</strong></td><td style="text-align: left;">k=20</td><td style="text-align: left;">Fault tolerance</td></tr><tr><td style="text-align: left;"><strong>Throughput</strong></td><td style="text-align: left;">500-2K msg/s</td><td style="text-align: left;">Gateway (v0.8.0)</td></tr><tr><td style="text-align: left;"></td><td style="text-align: left;">10K+ msg/s</td><td style="text-align: left;">Planned (v0.9.0 pooling)</td></tr><tr><td style="text-align: left;"><strong>Connections</strong></td><td style="text-align: left;">100K+</td><td style="text-align: left;">Per gateway node</td></tr></tbody></table><hr class="thin"/><h3 id="when-to-use-macula" class="section-heading"><a href="#when-to-use-macula" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">📊 When to Use Macula</span></h3><p><strong>✅ Great Fit:</strong></p><ul><li>Distributed IoT systems</li><li>Microservices mesh</li><li>Edge computing platforms</li><li>Real-time event streaming</li><li>Multi-region applications</li><li>Multi-tenant SaaS</li></ul><p><strong>⚠️ Consider Alternatives:</strong></p><ul><li>Single-region monoliths (RabbitMQ simpler)</li><li>Ultra-high-frequency trading (direct TCP faster)</li><li>Batch processing (Kafka better)</li><li>Web browser clients (use gateway as WebSocket bridge)</li></ul><hr class="thin"/><p><strong>Next Steps</strong>: See <a href="readme.html">README.md</a> for Quick Start and <a href="v0-8-0-overview.html">v0.8.0-OVERVIEW.md</a> for latest features.</p>

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="getting_started.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Getting Started
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="changelog.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Changelog
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/macula/0.10.0" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/macula/0.10.0">Hex Preview</a>

              (<a href="https://preview.hex.pm/preview/macula/0.10.0/show/ARCHITECTURE.md">current file</a>)

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="macula.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.2) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
