<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Module macula_protocol_types</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module macula_protocol_types</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#types">Data Types</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>
   Protocol message type definitions and constants for Macula mesh.


<h2><a name="description">Description</a></h2>
   Protocol message type definitions and constants for Macula mesh.
   Defines all message types that can be sent over QUIC streams.
<h2><a name="types">Data Types</a></h2>

<h3 class="typedecl"><a name="type-call_msg">call_msg()</a></h3>
<p><code>call_msg() = #{procedure := binary(), args := binary(), call_id := binary(), timeout =&gt; integer()}</code></p>


<h3 class="typedecl"><a name="type-cast_msg">cast_msg()</a></h3>
<p><code>cast_msg() = #{procedure := binary(), args := binary()}</code></p>
<p> JSON-encoded arguments (no reply expected)</p>

<h3 class="typedecl"><a name="type-connect_msg">connect_msg()</a></h3>
<p><code>connect_msg() = #{version := binary(), node_id := binary(), realm_id := binary(), capabilities := [atom()], endpoint =&gt; binary()}</code></p>


<h3 class="typedecl"><a name="type-disconnect_msg">disconnect_msg()</a></h3>
<p><code>disconnect_msg() = #{reason := atom(), message := binary()}</code></p>
<p> Human-readable reason</p>

<h3 class="typedecl"><a name="type-message">message()</a></h3>
<p><code>message() = {connect, <a href="#type-connect_msg" docgen-rel="seetype" docgen-href="#connect_msg/0">connect_msg()</a>} | {disconnect, <a href="#type-disconnect_msg" docgen-rel="seetype" docgen-href="#disconnect_msg/0">disconnect_msg()</a>} | {ping, <a href="#type-ping_msg" docgen-rel="seetype" docgen-href="#ping_msg/0">ping_msg()</a>} | {pong, <a href="#type-pong_msg" docgen-rel="seetype" docgen-href="#pong_msg/0">pong_msg()</a>} | {publish, <a href="#type-publish_msg" docgen-rel="seetype" docgen-href="#publish_msg/0">publish_msg()</a>} | {subscribe, <a href="#type-subscribe_msg" docgen-rel="seetype" docgen-href="#subscribe_msg/0">subscribe_msg()</a>} | {unsubscribe, <a href="#type-unsubscribe_msg" docgen-rel="seetype" docgen-href="#unsubscribe_msg/0">unsubscribe_msg()</a>} | {pubsub_route, <a href="#type-pubsub_route_msg" docgen-rel="seetype" docgen-href="#pubsub_route_msg/0">pubsub_route_msg()</a>} | {call, <a href="#type-call_msg" docgen-rel="seetype" docgen-href="#call_msg/0">call_msg()</a>} | {reply, <a href="#type-reply_msg" docgen-rel="seetype" docgen-href="#reply_msg/0">reply_msg()</a>} | {cast, <a href="#type-cast_msg" docgen-rel="seetype" docgen-href="#cast_msg/0">cast_msg()</a>} | {rpc_route, <a href="#type-rpc_route_msg" docgen-rel="seetype" docgen-href="#rpc_route_msg/0">rpc_route_msg()</a>}</code></p>


<h3 class="typedecl"><a name="type-message_type">message_type()</a></h3>
<p><code>message_type() = connect | disconnect | ping | pong | publish | subscribe | unsubscribe | pubsub_route | call | reply | cast | rpc_route | swim_ping | swim_ack | swim_ping_req | find_node | find_node_reply | store | find_value | find_value_reply</code></p>


<h3 class="typedecl"><a name="type-ping_msg">ping_msg()</a></h3>
<p><code>ping_msg() = #{timestamp := integer()}</code></p>
<p> Monotonic timestamp (milliseconds)</p>

<h3 class="typedecl"><a name="type-pong_msg">pong_msg()</a></h3>
<p><code>pong_msg() = #{timestamp := integer(), server_time := integer()}</code></p>
<p> Server's monotonic timestamp</p>

<h3 class="typedecl"><a name="type-publish_msg">publish_msg()</a></h3>
<p><code>publish_msg() = #{topic := binary(), payload := binary(), qos := 0 | 1 | 2, retain := boolean(), message_id := binary()}</code></p>


<h3 class="typedecl"><a name="type-pubsub_route_msg">pubsub_route_msg()</a></h3>
<p><code>pubsub_route_msg() = #{destination_node_id := binary(), source_node_id := binary(), hop_count := non_neg_integer(), max_hops := pos_integer(), topic := binary(), payload := <a href="#type-publish_msg" docgen-rel="seetype" docgen-href="#publish_msg/0">publish_msg()</a>}</code></p>


<h3 class="typedecl"><a name="type-reply_msg">reply_msg()</a></h3>
<p><code>reply_msg() = #{call_id := binary(), result =&gt; binary(), error =&gt; #{code := binary(), message := binary()}}</code></p>


<h3 class="typedecl"><a name="type-rpc_route_msg">rpc_route_msg()</a></h3>
<p><code>rpc_route_msg() = #{destination_node_id := binary(), source_node_id := binary(), hop_count := non_neg_integer(), max_hops := pos_integer(), payload_type := call | reply, payload := <a href="#type-call_msg" docgen-rel="seetype" docgen-href="#call_msg/0">call_msg()</a> | <a href="#type-reply_msg" docgen-rel="seetype" docgen-href="#reply_msg/0">reply_msg()</a>}</code></p>


<h3 class="typedecl"><a name="type-subscribe_msg">subscribe_msg()</a></h3>
<p><code>subscribe_msg() = #{topics := [binary()], qos := 0 | 1 | 2}</code></p>
<p> Requested QoS level</p>

<h3 class="typedecl"><a name="type-unsubscribe_msg">unsubscribe_msg()</a></h3>
<p><code>unsubscribe_msg() = #{topics := [binary()]}</code></p>
<p> Topics to unsubscribe from</p>

<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#message_type_id-1">message_type_id/1</a></td><td>Get numeric ID for a message type.</td></tr>
<tr><td valign="top"><a href="#message_type_name-1">message_type_name/1</a></td><td>Get message type name from numeric ID.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="message_type_id-1">message_type_id/1</a></h3>
<div class="spec">
<p><code>message_type_id(X1::<a href="#type-message_type" docgen-rel="seetype" docgen-href="#message_type/0">message_type()</a>) -&gt; byte()</code><br></p>
<p> </p>
</div><p>Get numeric ID for a message type.</p>

<h3 class="function"><a name="message_type_name-1">message_type_name/1</a></h3>
<div class="spec">
<p><code>message_type_name(X1::byte()) -&gt; {ok, <a href="#type-message_type" docgen-rel="seetype" docgen-href="#message_type/0">message_type()</a>} | {error, unknown_type}</code><br></p>
<p> </p>
</div><p>Get message type name from numeric ID.</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc</i></p>
</body>
</html>
