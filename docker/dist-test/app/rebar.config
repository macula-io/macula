%% -*- mode: erlang -*-
%% Macula QUIC Distribution Test Application

{erl_opts, [
    debug_info,
    {i, "include"}
]}.

%% Dependencies
{deps, [
    {quicer, "0.2.15"}
]}.

%% Release configuration
{relx, [
    {release, {macula_dist_test, "0.1.0"}, [
        macula_dist_test,
        quicer,
        sasl,
        runtime_tools
    ]},

    {mode, prod},
    {dev_mode, false},
    {include_erts, true},
    {extended_start_script, true},

    %% Include lib directories where macula and its deps are compiled
    {lib_dirs, ["_build/default/lib", "_checkouts/macula/_build/default/lib"]},

    {sys_config, "./config/sys.config"},
    {vm_args, "./config/vm.args"},

    {overlay, [
        {mkdir, "log"},
        {mkdir, "data"},
        {mkdir, "certs"}
    ]}
]}.

%% Profiles
{profiles, [
    {prod, [
        {relx, [
            {mode, prod},
            {dev_mode, false},
            {include_src, false}
        ]}
    ]}
]}.
