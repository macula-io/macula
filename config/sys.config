[
  %%=========================================================================
  %% Kernel Logger Configuration
  %%=========================================================================
  %% Suppresses noisy SASL reports and provides clean single-line logging
  {kernel, [
    {logger_level, info},
    {logger, [
      %% Default handler with single-line format
      {handler, default, logger_std_h, #{
        formatter => {logger_formatter, #{
          single_line => true,
          template => [time, " [", level, "] ", msg, "\n"]
        }}
      }}
    ]}
  ]},

  %% Disable SASL error logger (prevents verbose progress reports)
  {sasl, [
    {sasl_error_logger, false}
  ]},

  {macula, [
    %% Gateway configuration
    %% Set start_gateway to false to disable auto-start (for embedded use)
    {start_gateway, true},

    %% Default gateway port (overridden by GATEWAY_PORT env var)
    {gateway_port, 9443},

    %% Default gateway realm (overridden by MACULA_REALM env var)
    {gateway_realm, <<"com.example.realm">>},

    %% Health check server port (overridden by HEALTH_PORT env var)
    {health_port, 8080},

    %%=========================================================================
    %% TLS Configuration (v0.11.0+)
    %%=========================================================================
    %%
    %% TLS Mode: production | development
    %% - production: Strict certificate verification, requires CA bundle
    %% - development: Self-signed certificates, no verification (default)
    %%
    %% Environment variable: MACULA_TLS_MODE
    {tls_mode, development},

    %% CA Certificate Bundle (production mode)
    %% Path to CA certificate bundle for verifying peer certificates.
    %% If not set, system default locations are checked:
    %%   - /etc/ssl/certs/ca-certificates.crt (Debian/Ubuntu)
    %%   - /etc/pki/tls/certs/ca-bundle.crt (RHEL/CentOS)
    %%   - /etc/ssl/cert.pem (Alpine/macOS)
    %%
    %% Environment variable: MACULA_TLS_CACERTFILE
    %% {tls_cacertfile, "/etc/ssl/certs/ca-certificates.crt"},

    %% Server/Client Certificate (production mode)
    %% Path to PEM-encoded certificate for this node.
    %% Required for servers, optional for clients (mTLS).
    %%
    %% Environment variable: MACULA_TLS_CERTFILE
    %% {tls_certfile, "/etc/macula/server.crt"},

    %% Private Key (production mode)
    %% Path to PEM-encoded private key for this node.
    %% Must match the certificate above.
    %%
    %% Environment variable: MACULA_TLS_KEYFILE
    %% {tls_keyfile, "/etc/macula/server.key"},

    %% Hostname Verification (production mode)
    %% Verify that the server's certificate CN or SAN matches the hostname.
    %% Set to false to disable hostname verification (NOT recommended).
    %% Default: true
    %%
    %% Environment variable: MACULA_TLS_VERIFY_HOSTNAME
    {tls_verify_hostname, true},

    %%=========================================================================
    %% Development Certificate Paths
    %%=========================================================================
    %%
    %% Default certificate path (development mode auto-generation)
    {cert_path, "/var/lib/macula/cert.pem"},

    %% Default key path (development mode auto-generation)
    {key_path, "/var/lib/macula/key.pem"},

    %% Certificate validity period (days) for auto-generated certs
    {cert_validity_days, 3650},

    %% RSA key size for auto-generated certs
    {cert_key_bits, 2048}
  ]}
].
