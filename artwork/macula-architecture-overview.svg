<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: bold 24px sans-serif; fill: #333; }
      .subtitle { font: 16px sans-serif; fill: #666; }
      .box { fill: #fff; stroke: #333; stroke-width: 2; }
      .box-app { fill: #9C27B0; stroke: #7B1FA2; stroke-width: 2; }
      .box-peer { fill: #4CAF50; stroke: #388E3C; stroke-width: 2; }
      .box-gateway { fill: #2196F3; stroke: #1976D2; stroke-width: 2; }
      .box-dht { fill: #FF9800; stroke: #F57C00; stroke-width: 2; }
      .label { font: 14px sans-serif; fill: #fff; text-anchor: middle; }
      .label-dark { font: 14px sans-serif; fill: #333; text-anchor: middle; }
      .arrow { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .arrow-p2p { stroke: #4CAF50; stroke-width: 3; fill: none; marker-end: url(#arrowhead-green); stroke-dasharray: 5,5; }
      .feature { font: 12px sans-serif; fill: #666; }
      .metric { font: bold 18px sans-serif; fill: #4CAF50; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333" />
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#4CAF50" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="400" y="30" class="title" text-anchor="middle">Macula: Self-Organizing Mesh Network</text>
  <text x="400" y="55" class="subtitle" text-anchor="middle">HTTP/3 (QUIC) • Kademlia DHT • Direct P2P • Multi-Tenant</text>

  <!-- Your Application -->
  <rect x="330" y="80" width="140" height="60" class="box-app" rx="5"/>
  <text x="400" y="110" class="label">Your Application</text>
  <text x="400" y="128" class="label">(Erlang/Elixir)</text>

  <!-- Arrow to Peer -->
  <path d="M 400 140 L 400 175" class="arrow"/>
  <text x="420" y="160" class="feature">macula_peer API</text>

  <!-- Macula Peer -->
  <rect x="310" y="180" width="180" height="80" class="box-peer" rx="5"/>
  <text x="400" y="210" class="label">Macula Peer</text>
  <text x="400" y="228" class="label">(Local Node)</text>
  <text x="400" y="246" class="label" style="font-size: 11px;">Pub/Sub • RPC • Discovery</text>

  <!-- Gateway (Left) -->
  <rect x="80" y="320" width="140" height="80" class="box-gateway" rx="5"/>
  <text x="150" y="350" class="label">Gateway</text>
  <text x="150" y="368" class="label">(Relay Node)</text>
  <text x="150" y="386" class="label" style="font-size: 11px;">NAT Traversal</text>

  <!-- DHT (Center) -->
  <rect x="320" y="320" width="160" height="80" class="box-dht" rx="5"/>
  <text x="400" y="350" class="label">Distributed Hash Table</text>
  <text x="400" y="368" class="label">(Kademlia DHT)</text>
  <text x="400" y="386" class="label" style="font-size: 11px;">k=20 Replication • O(log N)</text>

  <!-- Remote Services (Right) -->
  <rect x="580" y="320" width="140" height="80" class="box-peer" rx="5"/>
  <text x="650" y="350" class="label">Remote Peers</text>
  <text x="650" y="368" class="label">(Services)</text>
  <text x="650" y="386" class="label" style="font-size: 11px;">Providers</text>

  <!-- Arrows from Peer -->
  <path d="M 340 260 L 180 320" class="arrow"/>
  <text x="250" y="285" class="feature">QUIC/HTTP3</text>

  <path d="M 400 260 L 400 320" class="arrow"/>
  <text x="430" y="295" class="feature">Query/Store</text>

  <path d="M 460 260 L 620 320" class="arrow-p2p"/>
  <text x="540" y="285" class="feature" style="fill: #4CAF50; font-weight: bold;">Direct P2P (v0.8.0)</text>

  <!-- Arrows from Gateway and DHT to Remote -->
  <path d="M 220 360 L 580 360" class="arrow"/>
  <text x="400" y="350" class="feature" style="fill: #999;">Fallback Relay</text>

  <!-- Connection from DHT to Gateway and Remote -->
  <path d="M 320 370 L 220 370" class="arrow"/>
  <path d="M 480 370 L 580 370" class="arrow"/>

  <!-- Key Features Box -->
  <rect x="50" y="450" width="700" height="130" class="box" rx="5"/>
  <text x="400" y="475" class="title" text-anchor="middle" style="font-size: 18px;">Key Features</text>

  <!-- Feature Grid -->
  <text x="80" y="505" class="feature">✓ BEAM-Native (OTP Supervision)</text>
  <text x="420" y="505" class="feature">✓ HTTP/3 (QUIC) Transport</text>

  <text x="80" y="528" class="feature">✓ Self-Organizing (Kademlia DHT)</text>
  <text x="420" y="528" class="feature">✓ Multi-Tenant (Realm Isolation)</text>

  <text x="80" y="551" class="feature">✓ Built-in Pub/Sub &amp; RPC</text>
  <text x="420" y="551" class="feature">✓ NAT/Firewall Friendly</text>

  <!-- Performance Metric -->
  <text x="400" y="575" class="metric" text-anchor="middle">50% Latency Improvement (v0.8.0 Direct P2P)</text>
</svg>
