<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 650">
  <defs>
    <linearGradient id="lobGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="iotGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#11998e;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#38ef7d;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="tweannGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f093fb;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f5576c;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="platformGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4facfe;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#00f2fe;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="sdkGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#fa709a;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#fee140;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="4" stdDeviation="4" flood-opacity="0.2"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="650" fill="#f8fafc"/>

  <!-- Title -->
  <text x="450" y="40" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#1e293b" text-anchor="middle">Macula Platform Architecture</text>
  <text x="450" y="65" font-family="Arial, sans-serif" font-size="12" fill="#64748b" text-anchor="middle">Distributed Application Platform for LoB, IoT, and TWEANN Workloads</text>

  <!-- Workload Layer -->
  <text x="450" y="105" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#475569" text-anchor="middle">APPLICATION WORKLOADS</text>

  <!-- LoB Box -->
  <rect x="50" y="120" width="240" height="110" rx="8" fill="url(#lobGrad)" filter="url(#shadow)"/>
  <text x="170" y="150" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">Line-of-Business</text>
  <text x="170" y="175" font-family="Arial, sans-serif" font-size="10" fill="rgba(255,255,255,0.9)" text-anchor="middle">Order Management</text>
  <text x="170" y="190" font-family="Arial, sans-serif" font-size="10" fill="rgba(255,255,255,0.9)" text-anchor="middle">Inventory Tracking</text>
  <text x="170" y="205" font-family="Arial, sans-serif" font-size="10" fill="rgba(255,255,255,0.9)" text-anchor="middle">Financial Processing</text>

  <!-- IoT Box -->
  <rect x="330" y="120" width="240" height="110" rx="8" fill="url(#iotGrad)" filter="url(#shadow)"/>
  <text x="450" y="150" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">IoT Workloads</text>
  <text x="450" y="175" font-family="Arial, sans-serif" font-size="10" fill="rgba(255,255,255,0.9)" text-anchor="middle">Smart Home Control</text>
  <text x="450" y="190" font-family="Arial, sans-serif" font-size="10" fill="rgba(255,255,255,0.9)" text-anchor="middle">Sensor Networks</text>
  <text x="450" y="205" font-family="Arial, sans-serif" font-size="10" fill="rgba(255,255,255,0.9)" text-anchor="middle">Edge Computing</text>

  <!-- TWEANN Box -->
  <rect x="610" y="120" width="240" height="110" rx="8" fill="url(#tweannGrad)" filter="url(#shadow)"/>
  <text x="730" y="150" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">TWEANN</text>
  <text x="730" y="175" font-family="Arial, sans-serif" font-size="10" fill="rgba(255,255,255,0.9)" text-anchor="middle">NEAT Evolution</text>
  <text x="730" y="190" font-family="Arial, sans-serif" font-size="10" fill="rgba(255,255,255,0.9)" text-anchor="middle">Distributed ML</text>
  <text x="730" y="205" font-family="Arial, sans-serif" font-size="10" fill="rgba(255,255,255,0.9)" text-anchor="middle">Population Evaluation</text>

  <!-- SDK API Arrows -->
  <path d="M 170 230 L 170 265" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)"/>
  <path d="M 450 230 L 450 265" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)"/>
  <path d="M 730 230 L 730 265" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- SDK Layer -->
  <rect x="50" y="265" width="800" height="50" rx="6" fill="url(#sdkGrad)" filter="url(#shadow)"/>
  <text x="450" y="295" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">SDK API Layer</text>
  <text x="160" y="295" font-family="monospace" font-size="9" fill="white">publish()</text>
  <text x="280" y="295" font-family="monospace" font-size="9" fill="white">subscribe()</text>
  <text x="390" y="295" font-family="monospace" font-size="9" fill="white">call()</text>
  <text x="500" y="295" font-family="monospace" font-size="9" fill="white">advertise()</text>
  <text x="620" y="295" font-family="monospace" font-size="9" fill="white">discover()</text>
  <text x="740" y="295" font-family="monospace" font-size="9" fill="white">health()</text>

  <!-- Arrow to Platform -->
  <path d="M 450 315 L 450 345" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Platform Layer -->
  <rect x="50" y="345" width="800" height="200" rx="10" fill="url(#platformGrad)" filter="url(#shadow)"/>
  <text x="450" y="375" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">MACULA PLATFORM (OTP Application)</text>

  <!-- Platform Components -->
  <!-- DHT Routing -->
  <rect x="70" y="395" width="170" height="60" rx="6" fill="rgba(255,255,255,0.95)"/>
  <text x="155" y="420" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#0369a1" text-anchor="middle">DHT Routing</text>
  <text x="155" y="438" font-family="Arial, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">Kademlia XOR Distance</text>

  <!-- Bootstrap -->
  <rect x="260" y="395" width="170" height="60" rx="6" fill="rgba(255,255,255,0.95)"/>
  <text x="345" y="420" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#0369a1" text-anchor="middle">Bootstrap System</text>
  <text x="345" y="438" font-family="Arial, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">Discovery + Registry</text>

  <!-- Gateway -->
  <rect x="450" y="395" width="170" height="60" rx="6" fill="rgba(255,255,255,0.95)"/>
  <text x="535" y="420" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#0369a1" text-anchor="middle">Gateway System</text>
  <text x="535" y="438" font-family="Arial, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">QUIC + Pub/Sub + RPC</text>

  <!-- Peer Management -->
  <rect x="640" y="395" width="190" height="60" rx="6" fill="rgba(255,255,255,0.95)"/>
  <text x="735" y="420" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#0369a1" text-anchor="middle">Peer Management</text>
  <text x="735" y="438" font-family="Arial, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">Dynamic Connections</text>

  <!-- Features Row -->
  <rect x="70" y="470" width="115" height="50" rx="4" fill="rgba(255,255,255,0.85)"/>
  <text x="127" y="492" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#0369a1" text-anchor="middle">Zero Config</text>
  <text x="127" y="507" font-family="Arial, sans-serif" font-size="8" fill="#64748b" text-anchor="middle">Auto TLS + Node ID</text>

  <rect x="200" y="470" width="115" height="50" rx="4" fill="rgba(255,255,255,0.85)"/>
  <text x="257" y="492" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#0369a1" text-anchor="middle">Multi-Tenant</text>
  <text x="257" y="507" font-family="Arial, sans-serif" font-size="8" fill="#64748b" text-anchor="middle">Realm Isolation</text>

  <rect x="330" y="470" width="115" height="50" rx="4" fill="rgba(255,255,255,0.85)"/>
  <text x="387" y="492" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#0369a1" text-anchor="middle">Fault Tolerant</text>
  <text x="387" y="507" font-family="Arial, sans-serif" font-size="8" fill="#64748b" text-anchor="middle">OTP Supervision</text>

  <rect x="460" y="470" width="115" height="50" rx="4" fill="rgba(255,255,255,0.85)"/>
  <text x="517" y="492" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#0369a1" text-anchor="middle">NAT Friendly</text>
  <text x="517" y="507" font-family="Arial, sans-serif" font-size="8" fill="#64748b" text-anchor="middle">HTTP/3 + QUIC</text>

  <rect x="590" y="470" width="115" height="50" rx="4" fill="rgba(255,255,255,0.85)"/>
  <text x="647" y="492" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#0369a1" text-anchor="middle">Scalable</text>
  <text x="647" y="507" font-family="Arial, sans-serif" font-size="8" fill="#64748b" text-anchor="middle">O(log N) Routing</text>

  <rect x="720" y="470" width="115" height="50" rx="4" fill="rgba(255,255,255,0.85)"/>
  <text x="777" y="492" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#0369a1" text-anchor="middle">BEAM Native</text>
  <text x="777" y="507" font-family="Arial, sans-serif" font-size="8" fill="#64748b" text-anchor="middle">Erlang/OTP 27+</text>

  <!-- Mesh Connections Arrow -->
  <path d="M 450 545 L 450 575" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Other Nodes -->
  <text x="450" y="600" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#475569" text-anchor="middle">MESH NETWORK</text>
  <text x="450" y="620" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">Self-organizing P2P connections to other Macula nodes</text>

  <!-- Mesh node icons -->
  <circle cx="200" cy="610" r="8" fill="#4facfe"/>
  <circle cx="350" cy="610" r="8" fill="#4facfe"/>
  <circle cx="550" cy="610" r="8" fill="#4facfe"/>
  <circle cx="700" cy="610" r="8" fill="#4facfe"/>

  <!-- Connection lines -->
  <line x1="208" y1="610" x2="342" y2="610" stroke="#4facfe" stroke-width="1" stroke-dasharray="4,2"/>
  <line x1="358" y1="610" x2="450" y2="575" stroke="#4facfe" stroke-width="1" stroke-dasharray="4,2"/>
  <line x1="450" y1="575" x2="542" y2="610" stroke="#4facfe" stroke-width="1" stroke-dasharray="4,2"/>
  <line x1="558" y1="610" x2="692" y2="610" stroke="#4facfe" stroke-width="1" stroke-dasharray="4,2"/>

  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8"/>
    </marker>
  </defs>

  <!-- Version badge -->
  <rect x="750" y="10" width="80" height="22" rx="4" fill="#059669"/>
  <text x="790" y="26" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white" text-anchor="middle">v0.8.5</text>
</svg>
